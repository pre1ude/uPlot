/*! https://github.com/leeoniya/uPlot (v1.6.32) */
var uPlot=function(){"use strict";function t(t,e,s,i){let l;s=s||0;let r=2147483647>=(i=i||e.length-1);for(;i-s>1;)l=r?s+i>>1:g((s+i)/2),t>e[l]?s=l:i=l;return t-e[s]>e[i]-t?i:s}const e=function(t){return(e,s,i)=>{let l=-1,r=-1;for(let r=s;i>=r;r++)if(t(e[r])){l=r;break}for(let l=i;l>=s;l--)if(t(e[l])){r=l;break}return[l,r]}}(t=>null!=t);function s(t,e,s,i){2==s&&(i=!0);let l=C(t),r=C(e);t==e&&(-1==l?(t*=s,e/=s):(t/=s,e*=s));let o=10==s?v:M,n=1==l?g:x,h=1==r?x:g,a=o(f(t)),u=o(f(e)),c=n(a),p=h(u),d=S(s,c),m=S(s,p);return 10==s&&(0>c&&(d=V(d,-c)),0>p&&(m=V(m,-p))),i?(t=d*l,e=m*r):(t=z(t,S(s,g(a)),!1),e=H(e,S(s,g(u)),!1)),[t,e]}function i(t,e,i,l){let r=s(t,e,i,l);return 0==t&&(r[0]=0),0==e&&(r[1]=0),r}const l={mode:3,pad:.1},r={pad:0,soft:null,mode:0},o={min:r,max:r};function n(t,e,s,i){return U(s)?a(t,e,s):(r.pad=s,r.soft=i?0:null,r.mode=i?3:0,a(t,e,o))}function h(t,e){return null==t?e:t}function a(t,e,s){let i=s.min,l=s.max,r=h(i.pad,0),o=h(l.pad,0),n=h(i.hard,-b),a=h(l.hard,b),u=h(i.soft,b),c=h(l.soft,-b),p=h(i.mode,0),d=h(l.mode,0),m=e-t,x=v(m),C=y(f(t),f(e)),M=v(C),L=f(M-x);(1e-24>m||L>10)&&(m=0,0!=t&&0!=e||(m=1e-24,2==p&&u!=b&&(r=0),2==d&&c!=-b&&(o=0)));let T=m||C||1e3,_=v(T),A=S(10,g(_)),k=V(z(t-T*(0==m?0==t?.1:1:r),A/10),24),P=u>t||1!=p&&(3!=p||k>u)&&(2!=p||u>k)?b:u,E=y(n,P>k&&t>=P?P:w(P,k)),W=V(H(e+T*(0==m?0==e?.1:1:o),A/10),24),R=e>c||1!=d&&(3!=d||c>W)&&(2!=d||W>c)?-b:c,D=w(a,W>R&&R>=e?R:y(R,W));return E==D&&0==E&&(D=100),[E,D]}const u=new Intl.NumberFormat,c=t=>u.format(t),p=Math,d=p.PI,f=p.abs,g=p.floor,m=p.round,x=p.ceil,w=p.min,y=p.max,S=p.pow,C=p.sign,v=p.log10,M=p.log2,L=(t,e=1)=>p.asinh(t/e),b=1/0;function T(t){return 1+(0|v((t^t>>31)-(t>>31)))}function _(t,e,s){return w(y(t,e),s)}function A(t){return"function"==typeof t}function k(t){return A(t)?t:()=>t}const P=t=>t,E=(t,e)=>e,W=()=>null,R=/\.\d*?(?=9{6,}|0{6,})/gm,D=t=>{if(G(t)||F.has(t))return t;const e=""+t,s=e.match(R);if(null==s)return t;let i=s[0].length-1;if(-1!=e.indexOf("e-")){let[t,s]=e.split("e");return+`${D(t)}e${s}`}return V(t,i)};function I(t,e,s=!0){return s?D(V(D(t/e))*e):V(t/e)*e}function H(t,e,s=!0){return s?D(x(D(t/e))*e):x(t/e)*e}function z(t,e,s=!0){return s?D(g(D(t/e))*e):g(t/e)*e}function V(t,e=0){if(G(t))return t;let s=10**e;return m(t*s*(1+Number.EPSILON))/s}const F=new Map;function O(t){return((""+t).split(".")[1]||"").length}function $(t,e,s,i){let l=[],r=i.map(O);for(let o=e;s>o;o++){let e=f(o),s=V(S(t,o),e);for(let n=0;i.length>n;n++){let h=10==t?+`${i[n]}e${o}`:i[n]*s,a=(0>o?e:0)+(r[n]>o?r[n]:0),u=10==t?h:V(h,a);l.push(u),F.set(u,a)}}return l}const Y={},K=[],N=[null,null],X=Array.isArray,G=Number.isInteger;function B(t){return"string"==typeof t}function U(t){let e=!1;if(null!=t){let s=t.constructor;e=null==s||s==Object}return e}const J=Object.getPrototypeOf(Uint8Array),j="__proto__";function Z(t,e=U){let s;if(X(t)){let i=t.find(t=>null!=t);if(X(i)||e(i)){s=Array(t.length);for(let i=0;t.length>i;i++)s[i]=Z(t[i],e)}else s=t.slice()}else if(t instanceof J)s=t.slice();else if(e(t)){s={};for(let i in t)i!=j&&(s[i]=Z(t[i],e))}else s=t;return s}function q(t){let e=arguments;for(let s=1;e.length>s;s++){let i=e[s];for(let e in i)e!=j&&(U(t[e])?q(t[e],Z(i[e])):t[e]=Z(i[e]))}return t}function Q(t,e,s){for(let i,l=0,r=-1;e.length>l;l++){let o=e[l];if(o>r){for(i=o-1;i>=0&&null==t[i];)t[i--]=null;for(i=o+1;s>i&&null==t[i];)t[r=i++]=null}}}const tt="u-off",et="top",st="bottom",it="left",lt="right",rt="mousedown",ot="mouseup",nt="dblclick",ht="change",at="dppxchange",ut="--",ct="undefined"!=typeof window,pt=ct?document:null,dt=ct?window:null;let ft,gt;function mt(t,e){if(null!=e){let s=t.classList;!s.contains(e)&&s.add(e)}}function xt(t,e){let s=t.classList;s.contains(e)&&s.remove(e)}function wt(t,e,s){t.style[e]=s+"px"}function yt(t,e,s,i){let l=pt.createElement(t);return null!=e&&mt(l,e),null!=s&&s.insertBefore(l,i),l}function St(t,e){return yt("div",t,e)}const Ct=new WeakMap;function vt(t,e,s,i,l){let r="translate("+e+"px,"+s+"px)";r!=Ct.get(t)&&(t.style.transform=r,Ct.set(t,r),0>e||0>s||e>i||s>l?mt(t,tt):xt(t,tt))}const Mt=new WeakMap;function Lt(t,e,s){let i=e+""+s;i!=Mt.get(t)&&(Mt.set(t,i),t.style.height=s+"px",t.style.width=e+"px",t.style.marginLeft=-e/2+"px",t.style.marginTop=-s/2+"px")}const bt={passive:!0},Tt={...bt,capture:!0};function _t(t,e,s,i){e.addEventListener(t,s,i?Tt:bt)}function At(t,e,s,i){e.removeEventListener(t,s,i?Tt:bt)}ct&&function t(){let e=devicePixelRatio;ft!=e&&(ft=e,gt&&At(ht,gt,t),gt=matchMedia(`(min-resolution: ${ft-.001}dppx) and (max-resolution: ${ft+.001}dppx)`),_t(ht,gt,t),dt.dispatchEvent(new CustomEvent(at)))}();const kt=["January","February","March","April","May","June","July","August","September","October","November","December"],Pt=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function Et(t){return t.slice(0,3)}const Wt=Pt.map(Et),Rt=kt.map(Et),Dt={MMMM:kt,MMM:Rt,WWWW:Pt,WWW:Wt};function It(t){return(10>t?"0":"")+t}const Ht={YYYY:t=>t.getFullYear(),YY:t=>(t.getFullYear()+"").slice(2),MMMM:(t,e)=>e.MMMM[t.getMonth()],MMM:(t,e)=>e.MMM[t.getMonth()],MM:t=>It(t.getMonth()+1),M:t=>t.getMonth()+1,DD:t=>It(t.getDate()),D:t=>t.getDate(),WWWW:(t,e)=>e.WWWW[t.getDay()],WWW:(t,e)=>e.WWW[t.getDay()],HH:t=>It(t.getHours()),H:t=>t.getHours(),h:t=>{let e=t.getHours();return 0==e?12:e>12?e-12:e},AA:t=>12>t.getHours()?"AM":"PM",aa:t=>12>t.getHours()?"am":"pm",a:t=>12>t.getHours()?"a":"p",mm:t=>It(t.getMinutes()),m:t=>t.getMinutes(),ss:t=>It(t.getSeconds()),s:t=>t.getSeconds(),fff:t=>function(t){return(10>t?"00":100>t?"0":"")+t}(t.getMilliseconds())};function zt(t,e){e=e||Dt;let s,i=[],l=/\{([a-z]+)\}|[^{]+/gi;for(;s=l.exec(t);)i.push("{"==s[0][0]?Ht[s[1]]:s[0]);return t=>{let s="";for(let l=0;i.length>l;l++)s+="string"==typeof i[l]?i[l]:i[l](t,e);return s}}const Vt=(new Intl.DateTimeFormat).resolvedOptions().timeZone,Ft={};function Ot(t){let e=Ft[t];return e||(e={key:t,plots:[],sub(t){e.plots.push(t)},unsub(t){e.plots=e.plots.filter(e=>e!=t)},pub(t,s,i,l,r,o,n){for(let h=0;e.plots.length>h;h++)e.plots[h]!=s&&e.plots[h].pub(t,s,i,l,r,o,n)}},null!=t&&(Ft[t]=e)),e}function $t(t,e,s){const i=t.mode,l=t.series[e],r=2==i?t._data[e]:t._data,o=t.scales,n=t.bbox;let h=r[0],a=2==i?r[1]:r[e],u=2==i?o[l.facets[0].scale]:o[t.series[0].scale],c=2==i?o[l.facets[1].scale]:o[l.scale],p=n.left,d=n.top,f=n.width,g=n.height,m=t.valToPosH,x=t.valToPosV;return 0==u.ori?s(l,h,a,u,c,m,x,p,d,f,g,Ut,jt,qt,te,se):s(l,h,a,u,c,x,m,d,p,g,f,Jt,Zt,Qt,ee,ie)}function Yt(t,e){let s=0,i=0,l=h(t.bands,K);for(let t=0;l.length>t;t++){let r=l[t];r.series[0]==e?s=r.dir:r.series[1]==e&&(i|=1==r.dir?1:2)}return[s,1==i?-1:2==i?1:3==i?2:0]}function Kt(t,e,s,i,l){let r=t.series[e],o=t.scales[2==t.mode?r.facets[1].scale:r.scale];return-1==l?o.min:1==l?o.max:3==o.distr?1==o.dir?o.min:o.max:0}function Nt(t,e,s,i,l,r){return $t(t,e,(t,e,o,n,h,a,u,c,p,d,f)=>{let g=t.pxRound;const m=0==n.ori?jt:Zt;let x,w;1==n.dir*(0==n.ori?1:-1)?(x=s,w=i):(x=i,w=s);let y=g(a(e[x],n,d,c)),S=g(u(o[x],h,f,p)),C=g(a(e[w],n,d,c)),v=g(u(1==r?h.max:h.min,h,f,p)),M=new Path2D(l);return m(M,C,v),m(M,y,v),m(M,y,S),M})}function Xt(t,e,s,i,l,r){let o=null;if(t.length>0){o=new Path2D;const n=0==e?qt:Qt;let h=s;for(let e=0;t.length>e;e++){let s=t[e];if(s[1]>s[0]){let t=s[0]-h;t>0&&n(o,h,i,t,i+r),h=s[1]}}let a=s+l-h,u=10;a>0&&n(o,h,i-u/2,a,i+r+u)}return o}function Gt(t,e,s,i,l,r,o){let n=[],h=t.length;for(let a=1==l?s:i;a>=s&&i>=a;a+=l)if(null===e[a]){let u=a,c=a;if(1==l)for(;++a<=i&&null===e[a];)c=a;else for(;--a>=s&&null===e[a];)c=a;let p=r(t[u]),d=c==u?p:r(t[c]),f=u-l;p=o>0||0>f||f>=h?p:r(t[f]);let g=c+l;d=0>o||0>g||g>=h?d:r(t[g]),p>d||n.push([p,d])}return n}function Bt(t){let e=0==t?Ut:Jt,s=0==t?(t,e,s,i,l,r)=>{t.arcTo(e,s,i,l,r)}:(t,e,s,i,l,r)=>{t.arcTo(s,e,l,i,r)},i=0==t?(t,e,s,i,l)=>{t.rect(e,s,i,l)}:(t,e,s,i,l)=>{t.rect(s,e,l,i)};return(t,l,r,o,n,h=0,a=0)=>{0==h&&0==a?i(t,l,r,o,n):(h=w(h,o/2,n/2),a=w(a,o/2,n/2),e(t,l+h,r),s(t,l+o,r,l+o,r+n,h),s(t,l+o,r+n,l,r+n,a),s(t,l,r+n,l,r,a),s(t,l,r,l+o,r,h),t.closePath())}}const Ut=(t,e,s)=>{t.moveTo(e,s)},Jt=(t,e,s)=>{t.moveTo(s,e)},jt=(t,e,s)=>{t.lineTo(e,s)},Zt=(t,e,s)=>{t.lineTo(s,e)},qt=Bt(0),Qt=Bt(1),te=(t,e,s,i,l,r)=>{t.arc(e,s,i,l,r)},ee=(t,e,s,i,l,r)=>{t.arc(s,e,i,l,r)},se=(t,e,s,i,l,r,o)=>{t.bezierCurveTo(e,s,i,l,r,o)},ie=(t,e,s,i,l,r,o)=>{t.bezierCurveTo(s,e,l,i,o,r)};function le(){return(t,e,s,i,l)=>{let{pxRatio:r}=t;return $t(t,e,(e,o,n,h,a,u,c,p,f,g,m)=>{let x,w,{pxRound:y,points:S}=e;0==h.ori?(x=Ut,w=te):(x=Jt,w=ee);const C=V(S.width*r,3);let v=(S.size-S.width)/2*r,M=V(2*v,3),L=new Path2D,b=new Path2D,{left:T,top:_,width:A,height:k}=t.bbox;qt(b,T-M,_-M,A+2*M,k+2*M);const P=t=>{if(null!=n[t]){let e=y(u(o[t],h,g,p)),s=y(c(n[t],a,m,f));x(L,e+v,s),w(L,e,s,v,0,2*d)}};if(l)l.forEach(P);else for(let t=s;i>=t;t++)P(t);return{stroke:C>0?L:null,fill:L,clip:b,flags:3}})}}function re(t){return(e,s,i,l,r,o)=>{i!=l&&(r!=i&&o!=i&&t(e,s,i),r!=l&&o!=l&&t(e,s,l),t(e,s,o))}}const oe=re(jt),ne=re(Zt);function he(t){const s=h(t?.alignGaps,0);return(t,i,l,r)=>$t(t,i,(o,n,h,a,u,c,p,d,f,g,m)=>{[l,r]=e(h,l,r);let x,w,y=o.pxRound,S=t=>y(c(t,a,g,d)),C=t=>y(p(t,u,m,f));0==a.ori?(x=jt,w=oe):(x=Zt,w=ne);const v=a.dir*(0==a.ori?1:-1),M={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:1},L=M.stroke;let b=!1;if(r-l<4*g)for(let t=1==v?l:r;t>=l&&r>=t;t+=v){let e=h[t];null===e?b=!0:null!=e&&x(L,S(n[t]),C(e))}else{let e,s,i,o=e=>t.posToVal(e,a.key,!0),u=null,c=null,p=S(n[1==v?l:r]),d=S(n[l]),f=S(n[r]),g=o(1==v?d+1:f-1);for(let t=1==v?l:r;t>=l&&r>=t;t+=v){let i=n[t],l=(1==v?g>i:i>g)?p:S(i),r=h[t];l==p?null!=r?(s=r,null==u?(x(L,l,C(s)),e=u=c=s):u>s?u=s:s>c&&(c=s)):null===r&&(b=!0):(null!=u&&w(L,p,C(u),C(c),C(e),C(s)),null!=r?(s=r,x(L,l,C(s)),u=c=e=s):(u=c=null,null===r&&(b=!0)),p=l,g=o(p+v))}null!=u&&u!=c&&i!=p&&w(L,p,C(u),C(c),C(e),C(s))}let[T,_]=Yt(t,i);if(null!=o.fill||0!=T){let e=M.fill=new Path2D(L),s=C(o.fillTo(t,i,o.min,o.max,T)),h=S(n[l]),a=S(n[r]);-1==v&&([a,h]=[h,a]),x(e,a,s),x(e,h,s)}if(!o.spanGaps){let e=[];b&&e.push(...Gt(n,h,l,r,v,S,s)),M.gaps=e=o.gaps(t,i,l,r,e),M.clip=Xt(e,a.ori,d,f,g,m)}return 0!=_&&(M.band=2==_?[Nt(t,i,l,r,L,-1),Nt(t,i,l,r,L,1)]:Nt(t,i,l,r,L,_)),M})}function ae(t,e,s,i,l,r,o=b){if(t.length>1){let n=null;for(let h=0,a=1/0;t.length>h;h++)if(void 0!==e[h]){if(null!=n){let e=f(t[h]-t[n]);a>e&&(a=e,o=f(s(t[h],i,l,r)-s(t[n],i,l,r)))}n=h}}return o}function ue(t,e,s,i,l){const r=t.length;if(2>r)return null;const o=new Path2D;if(s(o,t[0],e[0]),2==r)i(o,t[1],e[1]);else{let s=Array(r),i=Array(r-1),n=Array(r-1),h=Array(r-1);for(let s=0;r-1>s;s++)n[s]=e[s+1]-e[s],h[s]=t[s+1]-t[s],i[s]=n[s]/h[s];s[0]=i[0];for(let t=1;r-1>t;t++)0===i[t]||0===i[t-1]||i[t-1]>0!=i[t]>0?s[t]=0:(s[t]=3*(h[t-1]+h[t])/((2*h[t]+h[t-1])/i[t-1]+(h[t]+2*h[t-1])/i[t]),isFinite(s[t])||(s[t]=0));s[r-1]=i[r-2];for(let i=0;r-1>i;i++)l(o,t[i]+h[i]/3,e[i]+s[i]*h[i]/3,t[i+1]-h[i]/3,e[i+1]-s[i+1]*h[i]/3,t[i+1],e[i+1])}return o}class ce extends Error{constructor(t,e,s=null,i=null){super(`[${e}] ${t}`),this.name="UPlotError",this.module=e,this.context=s,this.originalError=i,Error.captureStackTrace&&Error.captureStackTrace(this,ce)}}const pe="INITIALIZATION",de="VALIDATION",fe="RENDERING",ge="DATA_PROCESSING",me="EVENT_HANDLING",xe="SCALE_CALCULATION",we="LAYOUT_CALCULATION";function ye(t,e,s){return function(...i){try{return s.apply(this,i)}catch(s){const l={method:e,args:i.length>0?"provided":"none",timestamp:Date.now()};throw s instanceof ce?(s.context={...s.context,...l},s):new ce(`Error in ${e}: ${s.message}`,t,l,s)}}}function Se(t,e,s,i="unknown"){if(null==t)throw new ce(`Required parameter '${e}' is missing or null`,s,{method:i,parameter:e,type:de});return t}function Ce(t,e,s,i,l="unknown"){const r=typeof t;if(r!==e)throw new ce(`Parameter '${s}' expected ${e} but got ${r}`,i,{method:l,parameter:s,expectedType:e,actualType:r,type:de});return t}function ve(t,e,s,i=null){try{return s()}catch(s){return console.warn(`[${t}] Non-critical error in ${e}:`,s),i}}const Me=new class{constructor(){this.errors=[],this.maxErrors=100}report(t){this.errors.push({error:t,timestamp:Date.now(),stack:t.stack}),this.errors.length>this.maxErrors&&this.errors.shift(),"undefined"!=typeof process&&"development"===process.env?.NODE_ENV&&console.error("uPlot Error:",t)}getErrors(t=null){return t?this.errors.filter(e=>e.error.module===t):this.errors}clear(){this.errors=[]}};class Le{constructor(t){try{Se(t,"uplot","LayoutManager","constructor"),this.uplot=t,this.fullWidCss=0,this.fullHgtCss=0,this.plotWidCss=0,this.plotHgtCss=0,this.plotLftCss=0,this.plotTopCss=0,this.plotLft=0,this.plotTop=0,this.plotWid=0,this.plotHgt=0,this._plotLftCss=0,this._plotTopCss=0,this._plotWidCss=0,this._plotHgtCss=0,this.sidesWithAxes=[!1,!1,!1,!1],this.initPadding()}catch(t){throw Me.report(t),t}}initPadding(){this.padding=((this.uplot.opts||{}).padding||[this.autoPadSide,this.autoPadSide,this.autoPadSide,this.autoPadSide]).map(t=>k(h(t,this.autoPadSide))),this._padding=this.padding.map((t,e)=>t(this.uplot,e,this.sidesWithAxes,0))}autoPadSide=(t,e,s)=>{let[i,l,r,o]=s,n=e%2,h=0;return 0==n&&(o||l)&&(h=0==e&&!i||2==e&&!r?m(50/3):0),1==n&&(i||r)&&(h=1==e&&!l||3==e&&!o?m(25):0),h};calcSize(t,e){return ye("LayoutManager","calcSize",function(t,e){if(Se(t,"width","LayoutManager","calcSize"),Se(e,"height","LayoutManager","calcSize"),Ce(t,"number","width","LayoutManager","calcSize"),Ce(e,"number","height","LayoutManager","calcSize"),0>=t||0>=e)throw new ce(`Invalid dimensions: width=${t}, height=${e}. Both must be positive numbers.`,"LayoutManager",{method:"calcSize",width:t,height:e,type:de});this.fullWidCss=this.plotWidCss=t,this.fullHgtCss=this.plotHgtCss=e,this.plotLftCss=this.plotTopCss=0,this.calcPlotRect(),this.calcAxesRects();const s=this.uplot.pxRatio||1,i=this.uplot.bbox||{};return this.plotLft=i.left=I(this.plotLftCss*s,.5),this.plotTop=i.top=I(this.plotTopCss*s,.5),this.plotWid=i.width=I(this.plotWidCss*s,.5),this.plotHgt=i.height=I(this.plotHgtCss*s,.5),this.uplot._width=t,this.uplot._height=e,{fullWidCss:this.fullWidCss,fullHgtCss:this.fullHgtCss,plotWidCss:this.plotWidCss,plotHgtCss:this.plotHgtCss,plotLftCss:this.plotLftCss,plotTopCss:this.plotTopCss,plotLft:this.plotLft,plotTop:this.plotTop,plotWid:this.plotWid,plotHgt:this.plotHgt}}).call(this,t,e)}calcPlotRect(){return ye("LayoutManager","calcPlotRect",function(){let t=!1,e=!1,s=!1,i=!1;(this.uplot.axes?.axes||[]).forEach(l=>{if(l.show&&l._show){let{side:r,_size:o}=l,n=o+(null!=l.label?l.labelSize:0);n>0&&(r%2?(this.plotWidCss-=n,3==r?(this.plotLftCss+=n,i=!0):s=!0):(this.plotHgtCss-=n,0==r?(this.plotTopCss+=n,t=!0):e=!0))}}),this.sidesWithAxes[0]=t,this.sidesWithAxes[1]=s,this.sidesWithAxes[2]=e,this.sidesWithAxes[3]=i,this.plotWidCss-=this._padding[1]+this._padding[3],this.plotLftCss+=this._padding[3],this.plotHgtCss-=this._padding[2]+this._padding[0],this.plotTopCss+=this._padding[0]}).call(this)}calcAxesRects(){let t=this.plotLftCss+this.plotWidCss,e=this.plotTopCss+this.plotHgtCss,s=this.plotLftCss,i=this.plotTopCss;function l(l,r){switch(l){case 1:return t+=r,t-r;case 2:return e+=r,e-r;case 3:return s-=r,s+r;case 0:return i-=r,i+r}}(this.uplot.axes?.axes||[]).forEach(t=>{if(t.show&&t._show){let e=t.side;t._pos=l(e,t._size),null!=t.label&&(t._lpos=l(e,t.labelSize))}})}paddingCalc(t){let e=!0;return this.padding.forEach((s,i)=>{let l=s(this.uplot,i,this.sidesWithAxes,t);l!=this._padding[i]&&(e=!1),this._padding[i]=l}),e}convergeSize(t,e){let s=!1,i=0;for(;!s;){i++;let l=this.paddingCalc(i);s=3==i||l,s||this.calcSize(t,e)}return s}updateLayout(){this._plotLftCss=this.plotLftCss,this._plotTopCss=this.plotTopCss,this._plotWidCss=this.plotWidCss,this._plotHgtCss=this.plotHgtCss}getPlotRect(){return{left:this.plotLftCss,top:this.plotTopCss,width:this.plotWidCss,height:this.plotHgtCss}}getPadding(){return[...this._padding]}getCanvasRect(){return{left:this.plotLft,top:this.plotTop,width:this.plotWid,height:this.plotHgt}}hasChanged(){return this._plotLftCss!==this.plotLftCss||this._plotTopCss!==this.plotTopCss||this._plotWidCss!==this.plotWidCss||this._plotHgtCss!==this.plotHgtCss}}const be=t=>t%1==0,Te=[1,2,2.5,5],_e=$(10,-32,0,Te),Ae=$(10,0,32,Te),ke=Ae.filter(be),Pe=_e.concat(Ae),Ee="{YYYY}",We="\n"+Ee,Re="{M}/{D}",De="\n"+Re,Ie=De+"/{YY}",He="{aa}",ze="{h}:{mm}"+He,Ve="\n"+ze,Fe=":{ss}",Oe=null;function $e(t){let e=1e3*t,s=60*e,i=60*s,l=24*i,r=30*l,o=365*l;return[(1==t?$(10,0,3,Te).filter(be):$(10,-3,0,Te)).concat([e,5*e,10*e,15*e,30*e,s,5*s,10*s,15*s,30*s,i,2*i,3*i,4*i,6*i,8*i,12*i,l,2*l,3*l,4*l,5*l,6*l,7*l,8*l,9*l,10*l,15*l,r,2*r,3*r,4*r,6*r,o,2*o,5*o,10*o,25*o,50*o,100*o]),[[o,Ee,Oe,Oe,Oe,Oe,Oe,Oe,1],[28*l,"{MMM}",We,Oe,Oe,Oe,Oe,Oe,1],[l,Re,We,Oe,Oe,Oe,Oe,Oe,1],[i,"{h}"+He,Ie,Oe,De,Oe,Oe,Oe,1],[s,ze,Ie,Oe,De,Oe,Oe,Oe,1],[e,Fe,Ie+" "+ze,Oe,De+" "+ze,Oe,Ve,Oe,1],[t,Fe+".{fff}",Ie+" "+ze,Oe,De+" "+ze,Oe,Ve,Oe,1]],function(e){return(n,h,a,u,c,p)=>{let d=[],f=c>=o,x=c>=r&&o>c,w=e(a),y=V(w*t,3),S=Ue(w.getFullYear(),f?0:w.getMonth(),x||f?1:w.getDate()),C=V(S*t,3);if(x||f){let s=x?c/r:0,i=f?c/o:0,l=y==C?y:V(Ue(S.getFullYear()+i,S.getMonth()+s,1)*t,3),n=new Date(m(l/t)),h=n.getFullYear(),a=n.getMonth();for(let r=0;u>=l;r++){let o=Ue(h+i*r,a+s*r,1),n=o-e(V(o*t,3));l=V((+o+n)*t,3),l>u||d.push(l)}}else{let r=l>c?c:l,o=C+(g(a)-g(y))+H(y-C,r);d.push(o);let f=e(o),m=f.getHours()+f.getMinutes()/s+f.getSeconds()/i,x=c/i,w=p/n.axes[h]._space;for(;o=V(o+c,1==t?0:3),u>=o;)if(x>1){let t=g(V(m+x,6))%24,s=e(o).getHours()-t;s>1&&(s=-1),o-=s*i,m=(m+x)%24,.7>V((o-d[d.length-1])/c,3)*w||d.push(o)}else d.push(o)}return d}}]}const[Ye,Ke,Ne]=$e(1),[Xe,Ge,Be]=$e(.001);function Ue(t,e,s){return new Date(t,e,s)}function Je(t,e){return e(t)}function je(t,e){return(s,i,l,r)=>null==r?ut:e(t(i))}$(2,-53,53,[1]);const Ze={show:!0,live:!0,isolate:!1,mount:()=>{},markers:{show:!0,width:2,stroke:function(t,e){let s=t.series[e];return s.width?s.stroke(t,e):s.points.width?s.points.stroke(t,e):null},fill:function(t,e){return t.series[e].fill(t,e)},dash:"solid"},idx:null,idxs:null,values:[]},qe=[0,0];function Qe(t,e,s,i=!0){return t=>{0==t.button&&(!i||t.target==e)&&s(t)}}function ts(t,e,s,i=!0){return t=>{(!i||t.target==e)&&s(t)}}const es={show:!0,x:!0,y:!0,lock:!1,move:function(t,e,s){return qe[0]=e,qe[1]=s,qe},points:{one:!1,show:function(t,e){let s=t.cursor.points,i=St(),l=s.size(t,e);wt(i,"width",l),wt(i,"height",l);let r=l/-2;wt(i,"marginLeft",r),wt(i,"marginTop",r);let o=s.width(t,e,l);return o&&wt(i,"borderWidth",o),i},size:function(t,e){return t.series[e].points.size},width:0,stroke:function(t,e){let s=t.series[e].points;return s._stroke||s._fill},fill:function(t,e){let s=t.series[e].points;return s._fill||s._stroke}},bind:{mousedown:Qe,mouseup:Qe,click:Qe,dblclick:Qe,mousemove:ts,mouseleave:ts,mouseenter:ts},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,click:(t,e)=>{e.stopPropagation(),e.stopImmediatePropagation()},_x:!1,_y:!1},focus:{dist:(t,e,s,i,l)=>i-l,prox:-1,bias:0},hover:{skip:[void 0],prox:null,bias:0},left:-10,top:-10,idx:null,dataIdx:null,idxs:null,event:null},ss={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},is=q({},ss,{filter:E});q({},is,{size:10}),q({},ss,{show:!1});const ls={show:!0,scale:"x",auto:!1,sorted:1,min:b,max:-b,idxs:[]};function rs(t,e){return e.map(t=>null==t?"":c(t))}function os(t,e,s,i,l,r,o){let n=[],h=F.get(l)||0;for(let t=s=o?s:V(H(s,l),h);i>=t;t=V(t+l,h))n.push(Object.is(t,-0)?0:t);return n}function ns(e,s,i,l,r){const o=[],n=e.scales[e.axes[s].scale].log,h=g((10==n?v:M)(i));r=S(n,h),10==n&&(r=Pe[t(r,Pe)]);let a=i,u=r*n;10==n&&(u=Pe[t(u,Pe)]);do{o.push(a),a+=r,10!=n||F.has(a)||(a=V(a,F.get(r))),u>a||(u=(r=a)*n,10==n&&(u=Pe[t(u,Pe)]))}while(l>=a);return o}function hs(t,e,s,i,l){let r=t.scales[t.axes[e].scale].asinh,o=i>r?ns(t,e,y(r,s),i,l):[r],n=0>i||s>0?[]:[0];return(-r>s?ns(t,e,y(r,-i),-s,l):[r]).reverse().map(t=>-t).concat(n,o)}const as=/./,us=/[12357]/,cs=/[125]/,ps=/1/,ds=(t,e,s,i)=>t.map((t,l)=>4==e&&0==t||l%i==0&&s.test(t.toExponential()[0>t?1:0])?t:null);function fs(t,e,s){let i=t.axes[s],l=i.scale,r=t.scales[l],o=t.valToPos,n=i._space,h=o(10,l),a=o(9,l)-h<n?o(7,l)-h<n?o(5,l)-h<n?ps:cs:us:as;if(a==ps){let t=f(o(1,l)-h);if(n>t)return ds(e.slice().reverse(),r.distr,a,x(n/t)).reverse()}return ds(e,r.distr,a,1)}function gs(t,e,s){let i=t.axes[s],l=i.scale,r=i._space,o=t.valToPos,n=f(o(1,l)-o(2,l));return r>n?ds(e.slice().reverse(),3,as,x(r/n)).reverse():e}function ms(t,e,s,i){return null==i?ut:null==e?"":c(e)}const xs={scale:null,auto:!0,sorted:0,min:b,max:-b},ws=(t,e,s,i,l)=>l,ys={show:!0,auto:!0,sorted:0,gaps:ws,alpha:1,facets:[q({},xs,{scale:"x"}),q({},xs,{scale:"y"})]},Ss={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:ws,alpha:1,points:{show:function(t,e){let{scale:s,idxs:i}=t.series[0],l=t._data[0],r=t.valToPos(l[i[0]],s,!0),o=t.valToPos(l[i[1]],s,!0);return f(o-r)/(t.series[e].points.space*t.pxRatio)>=i[1]-i[0]},filter:null},values:null,min:b,max:-b,idxs:[],path:null,clip:null};function Cs(t,e,s){return s/10}const vs={time:!0,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},Ms=q({},vs,{time:!1,ori:1});function Ls(t,e,s){return null==e?N:[e,s]}const bs=Ls;function Ts(t,e,s){return null==e?N:n(e,s,.1,!0)}function _s(t,e,i,l){return null==e?N:s(e,i,t.scales[l].log,!0)}const As=_s;function ks(t,e,s,l){return null==e?N:i(e,s,t.scales[l].log,!0)}const Ps=ks;class Es{constructor(t,e){try{Se(t,"uplot","ScaleManager","constructor"),Se(e,"opts","ScaleManager","constructor"),this.uplot=t,this.opts=e,this.scales={},this.pendScales={},this.viaAutoScaleX=!1,this.mode=t.mode||1,this.xScaleKey=2==this.mode?e.series&&e.series[1]&&e.series[1].facets?e.series[1].facets[0].scale:"x":e.series&&e.series[0]?e.series[0].scale:"x"}catch(t){throw Me.report(t),t}}initValToPct(t){try{Se(t,"sc","ScaleManager","initValToPct");const e=3==t.distr?e=>{if(0>=e&&!t.clamp)throw new ce(`Invalid value ${e} for log scale - must be positive`,"ScaleManager",{method:"initValToPct",scaleKey:t.key,type:xe});return v(e>0?e:t.clamp(this.uplot,e,t.min,t.max,t.key))}:4==t.distr?e=>L(e,t.asinh):100==t.distr?e=>{if("function"!=typeof t.fwd)throw new ce("Custom scale missing forward transform function","ScaleManager",{method:"initValToPct",scaleKey:t.key,type:de});return t.fwd(e)}:t=>t;return s=>{try{let i=e(s),{_min:l,_max:r}=t;if(null==l||null==r)throw new ce("Scale not properly initialized - missing min/max values","ScaleManager",{method:"valToPct",scaleKey:t.key,type:xe});let o=r-l;return 0===o?.5:(i-l)/o}catch(e){if(e instanceof ce)throw e;throw new ce("Error converting value to percentage: "+e.message,"ScaleManager",{method:"valToPct",scaleKey:t.key,value:s,type:xe},e)}}}catch(t){throw Me.reportError(t),t}}initScale(t){try{Se(t,"scaleKey","ScaleManager","initScale"),Ce(t,"string","scaleKey","ScaleManager","initScale");let e=this.scales[t];if(null==e){let s=(this.opts.scales||Y)[t]||Y;if(null!=s.from){if(s.from===t)throw new ce(`Scale '${t}' cannot reference itself as parent`,"ScaleManager",{method:"initScale",scaleKey:t,type:de});if(this.initScale(s.from),!this.scales[s.from])throw new ce(`Parent scale '${s.from}' could not be initialized`,"ScaleManager",{method:"initScale",scaleKey:t,parentScale:s.from,type:pe});let e=q({},this.scales[s.from],s,{key:t});e.valToPct=this.initValToPct(e),this.scales[t]=e}else{e=this.scales[t]=q({},t==this.xScaleKey?vs:Ms,s),e.key=t;let i=e.time,r=e.range,o=X(r);if((t!=this.xScaleKey||2==this.mode&&!i)&&(!o||null!=r[0]&&null!=r[1]||(r={min:null==r[0]?l:{mode:1,hard:r[0],soft:r[0]},max:null==r[1]?l:{mode:1,hard:r[1],soft:r[1]}},o=!1),!o&&U(r))){let t=r;r=(e,s,i)=>null==s?N:n(s,i,t)}e.range=k(r||(i?bs:t==this.xScaleKey?3==e.distr?As:4==e.distr?Ps:Ls:3==e.distr?_s:4==e.distr?ks:Ts)),e.auto=k(!o&&e.auto),e.clamp=k(e.clamp||Cs),e._min=e._max=null,e.valToPct=this.initValToPct(e)}}}catch(t){throw Me.reportError(t),t}}initScales(){this.initScale("x"),this.initScale("y"),1==this.mode&&this.uplot.series&&Array.isArray(this.uplot.series)&&this.uplot.series.forEach(t=>{t&&t.scale&&this.initScale(t.scale)}),this.uplot.axes?.axes&&Array.isArray(this.uplot.axes.axes)&&this.uplot.axes.axes.forEach(t=>{t&&t.scale&&this.initScale(t.scale)});for(let t in this.opts.scales||{})this.initScale(t);for(let t in this.scales){let e=this.scales[t];null==e.min&&null==e.max||(this.pendScales[t]={min:e.min,max:e.max},e.min=e.max=null)}}getHPos(t,e,s,i){let l=e.valToPct(t);return i+s*(-1==e.dir?1-l:l)}getVPos(t,e,s,i){let l=e.valToPct(t);return i+s*(-1==e.dir?l:1-l)}getPos(t,e,s,i){return 0==e.ori?this.getHPos(t,e,s,i):this.getVPos(t,e,s,i)}valToPosX(t,e,s,i){return 0==this.scales[this.xScaleKey].ori?this.getHPos(t,e,s,i):this.getVPos(t,e,s,i)}valToPosY(t,e,s,i){return 0==this.scales[this.xScaleKey].ori?this.getVPos(t,e,s,i):this.getHPos(t,e,s,i)}posToVal(t,e,s){return ye("ScaleManager","posToVal",function(t,e,s){Se(t,"pos","ScaleManager","posToVal"),Se(e,"scaleKey","ScaleManager","posToVal"),Ce(t,"number","pos","ScaleManager","posToVal"),Ce(e,"string","scaleKey","ScaleManager","posToVal");let i,l,r=this.scales[e];if(!r)throw new ce(`Scale '${e}' not found`,"ScaleManager",{method:"posToVal",scaleKey:e,type:de});if(s){let t=this.uplot.bbox||{};i=0==r.ori?t.width:t.height,l=0==r.ori?t.left:t.top}else{let t=this.uplot.layout||this.uplot;i=0==r.ori?t.plotWidCss:t.plotHgtCss,l=0==r.ori?t.plotLftCss:t.plotTopCss}if(0===i)throw new ce("Cannot convert position to value - plot dimension is zero","ScaleManager",{method:"posToVal",scaleKey:e,dimension:i,type:xe});let o=(t-l)/i;-1==r.dir&&(o=1-o),1==r.ori&&(o=1-o);let{_min:n,_max:h}=r;if(null==n||null==h)throw new ce("Scale not properly initialized - missing min/max values","ScaleManager",{method:"posToVal",scaleKey:e,type:xe});let a=n+(h-n)*o;return 3==r.distr?Math.pow(10,a):4==r.distr?Math.sinh(a):100==r.distr?"function"==typeof r.inv?r.inv(a):(()=>{throw new ce("Custom scale missing inverse transform function","ScaleManager",{method:"posToVal",scaleKey:e,type:de})})():a}).call(this,t,e,s)}posToValX(t,e){return this.posToVal(t,this.xScaleKey,e)}posToValY(t,e,s){return this.posToVal(t,e,s)}autoScaleX(){let t,e;this.viaAutoScaleX=!0;const s=this.uplot.data||[],i=this.scales[this.xScaleKey];if(s.length>0&&s[0]&&s[0].length>0){let l=s[0];if(t=l[0],e=l[l.length-1],i.range){let s=i.range(this.uplot,t,e,i.key);s&&(t=s[0],e=s[1])}}else t=e=null;this._setScale(this.xScaleKey,t,e)}_setScale(t,e,s){this.setScale(t,{min:e,max:s})}setScale(t,e){if(null!=this.scales[t]){if((null!=e.min||null!=e.max)&&null!=e.min&&null!=e.max&&e.min>e.max){let t=e.min;e.min=e.max,e.max=t}this.pendScales[t]=e,this.uplot.shouldSetScales=!0}}setScales(){const t={min:null,max:null};for(let e in this.scales){let s=this.scales[e];null==this.pendScales[e]&&(null==s.min||null!=this.pendScales[this.xScaleKey]&&s.auto(this.uplot,this.viaAutoScaleX))&&(this.pendScales[e]=t)}for(let e in this.pendScales){let s=this.scales[e];null==this.pendScales[e]&&null!=s.from&&null!=this.pendScales[s.from]&&(this.pendScales[e]=t)}let e={};for(let t in this.pendScales){let s=this.scales[t],i=this.pendScales[t];null==i.min&&null==i.max||(null!=i.min&&(s.min=i.min,s._min=3==s.distr?v(s.min):4==s.distr?L(s.min,s.asinh):s.min),null!=i.max&&(s.max=i.max,s._max=3==s.distr?v(s.max):4==s.distr?L(s.max,s.asinh):s.max),e[t]=!0)}return this.pendScales={},this.viaAutoScaleX=!1,e}getScale(t){return this.scales[t]}getXScale(){return this.scales[this.xScaleKey]}getAllScales(){return this.scales}hasScale(t){return null!=this.scales[t]}updateScale(t,e){let s=this.scales[t];null!=s&&(q(s,e),null==e.distr&&null==e.asinh||(s.valToPct=this.initValToPct(s)))}}class Ws{constructor(t){try{Se(t,"uplot","EventManager","constructor"),this.uplot=t,this.mouseListeners=new Map,this.globalListeners=new Set,this.dragging=!1,this.rawMouseLeft0=0,this.rawMouseTop0=0,this.mouseLeft0=0,this.mouseTop0=0,this.rawMouseLeft1=0,this.rawMouseTop1=0,this.mouseLeft1=0,this.mouseTop1=0,this.dragX=!1,this.dragY=!1,this.downSelectLeft=0,this.downSelectTop=0,this.downSelectWidth=0,this.downSelectHeight=0,this.rect=null}catch(t){throw Me.report(t),t}}initEvents(t){return ye("EventManager","initEvents",function(t){Se(t,"opts","EventManager","initEvents");const{cursor:e,over:s,wrap:i}=this.uplot;if(!e)throw new ce("Cursor configuration not available","EventManager",{method:"initEvents",type:pe});if(!s)throw new ce("Over element not available for event binding","EventManager",{method:"initEvents",type:pe});if(e.show)try{this.onMouse(rt,s,this.mouseDown.bind(this)),this.onMouse("mousemove",s,this.mouseMove.bind(this)),this.onMouse("mouseenter",s,this.mouseEnter.bind(this)),this.onMouse("mouseleave",s,this.mouseLeave.bind(this)),this.onMouse(nt,s,this.dblClick.bind(this)),this.initTouchEvents(s),i&&_t("click",i,this.handleWrapClick.bind(this),!0),ct&&(this.bindGlobalEvent("resize",dt,this.invalidateRects.bind(this)),this.bindGlobalEvent("scroll",dt,this.invalidateRects.bind(this),!0),this.bindGlobalEvent(at,dt,this.onDppxChange.bind(this)))}catch(t){throw new ce("Error initializing events: "+t.message,"EventManager",{method:"initEvents",type:me},t)}}).call(this,t)}initTouchEvents(t){const e=(e,s)=>{if(1===e.touches.length){const i=e.touches[0],l=new MouseEvent(s,{clientX:i.clientX,clientY:i.clientY,button:0,buttons:1,bubbles:!0,cancelable:!0});e.preventDefault(),t.dispatchEvent(l)}};_t("touchstart",t,t=>e(t,"mousedown")),_t("touchmove",t,t=>e(t,"mousemove")),_t("touchend",t,e=>{if(1===e.changedTouches.length){const s=e.changedTouches[0],i=new MouseEvent("mouseup",{clientX:s.clientX,clientY:s.clientY,button:0,buttons:0,bubbles:!0,cancelable:!0});e.preventDefault(),t.dispatchEvent(i)}})}onMouse(t,e,s,i=!0){const{cursor:l}=this.uplot,r=this.mouseListeners.get(e)||{},o=l.bind[t](this.uplot,e,s,i);o&&(_t(t,e,r[t]=o),this.mouseListeners.set(e,r))}offMouse(t,e){const s=this.mouseListeners.get(e)||{};for(let i in s)null!=t&&i!=t||(At(i,e,s[i]),delete s[i]);null==t&&this.mouseListeners.delete(e)}bindGlobalEvent(t,e,s,i=!1){_t(t,e,s,i),this.globalListeners.add({event:t,target:e,handler:s,useCapture:i})}handleWrapClick(t){const{over:e,cursor:s}=this.uplot;t.target===e&&(this.mouseLeft1!=this.mouseLeft0||this.mouseTop1!=this.mouseTop0)&&s.drag.click(this.uplot,t)}mouseDown(t,e,s,i,l,r,o){return ye("EventManager","mouseDown",function(t,e,s,i){const{cursor:l}=this.uplot;if(!l||!l.drag)throw new ce("Cursor or drag configuration not available","EventManager",{method:"mouseDown",type:me});try{this.dragging=!0,this.dragX=this.dragY=l.drag._x=l.drag._y=!1;let e=s??this.mouseLeft1,r=i??this.mouseTop1;this.rawMouseLeft0=this.rawMouseLeft1=this.mouseLeft0=this.mouseLeft1=e,this.rawMouseTop0=this.rawMouseTop1=this.mouseTop0=this.mouseTop1=r,this.downSelectLeft=e,this.downSelectTop=r,this.downSelectWidth=0,this.downSelectHeight=0,null!=t&&(this.onMouse(ot,pt,this.mouseUp.bind(this),!1),"function"==typeof this.uplot.pubSync&&this.uplot.pubSync(rt,this.uplot,this.mouseLeft0,this.mouseTop0,this.uplot.plotWidCss,this.uplot.plotHgtCss,null))}catch(t){throw new ce("Error handling mouse down: "+t.message,"EventManager",{method:"mouseDown",type:me},t)}}).call(this,t,e,s,i,l,r,o)}mouseMove(t,e,s,i,l,r,o){const{cursor:n}=this.uplot;if(n._lock)return;if(this.setCursorEvent(t),this.dragging&&null!=t&&0==t.movementX&&0==t.movementY)return;let h,a;this.syncRect(!1),null!=t?(h=t.clientX-this.rect.left,a=t.clientY-this.rect.top):(h=s,a=i,this.syncRect(!0)),(0>h||0>a)&&(h=-10,a=-10),this.mouseLeft1=h,this.mouseTop1=a,this.updateCursor(null,null==e,null!=e)}mouseUp(t,e,s,i,l,r,o){const{cursor:n}=this.uplot;this.dragging=n.drag._x=n.drag._y=!1;let h=i??this.mouseTop1;if(this.rawMouseLeft1=this.mouseLeft1=s??this.mouseLeft1,this.rawMouseTop1=this.mouseTop1=h,n.drag.setScale){let t=this.mouseLeft1-this.mouseLeft0,e=this.mouseTop1-this.mouseTop0;this.dragX&&Math.abs(t)>=n.drag.dist&&this.setSelect({left:Math.min(this.mouseLeft0,this.mouseLeft1),width:Math.abs(t),top:n.drag.y?Math.min(this.mouseTop0,this.mouseTop1):0,height:n.drag.y?Math.abs(e):this.uplot.plotHgtCss},!1)}null!=t&&(this.offMouse(ot,pt),this.uplot.pubSync(ot,this.uplot,this.mouseLeft1,this.mouseTop1,this.uplot.plotWidCss,this.uplot.plotHgtCss,null))}mouseLeave(t,e,s,i,l,r,o){const{cursor:n}=this.uplot;n._lock||(this.setCursorEvent(t),this.dragging||(this.rawMouseLeft1=this.mouseLeft1=-10,this.rawMouseTop1=this.mouseTop1=-10,this.updateCursor(null,null==e,null!=e)))}mouseEnter(t){this.setCursorEvent(t),this.syncRect(!1)}dblClick(t,e,s,i,l,r,o){const{cursor:n}=this.uplot;if(n._lock)return;this.setCursorEvent(t);let h=i??this.mouseTop1;this.rawMouseLeft1=this.mouseLeft1=s??this.mouseLeft1,this.rawMouseTop1=this.mouseTop1=h,this.updateCursor(null,null==e,null!=e),this.uplot.pubSync(nt,this.uplot,this.mouseLeft1,this.mouseTop1,this.uplot.plotWidCss,this.uplot.plotHgtCss,null)}setCursorEvent(t){this.uplot.cursor.event=t}updateCursor(t,e,s){this.rawMouseLeft1=this.mouseLeft1,this.rawMouseTop1=this.mouseTop1,[this.mouseLeft1,this.mouseTop1]=this.uplot.cursor.move(this.uplot,this.mouseLeft1,this.mouseTop1),this.uplot.cursor.left=this.mouseLeft1,this.uplot.cursor.top=this.mouseTop1,this.uplot.updateCursor&&this.uplot.updateCursor(t,e,s)}syncRect(t){(t||null==this.rect)&&(this.rect=this.uplot.over.getBoundingClientRect(),this.uplot.fire("syncRect",this.rect))}setSelect(t,e){this.uplot.setSelect&&this.uplot.setSelect(t,e)}onDppxChange(){this.uplot.setPxRatio&&this.uplot.setPxRatio()}invalidateRects(){this.uplot.syncRect&&this.uplot.syncRect(!0)}getMousePos(){return{left:this.mouseLeft1,top:this.mouseTop1,rawLeft:this.rawMouseLeft1,rawTop:this.rawMouseTop1}}getDragState(){return{dragging:this.dragging,dragX:this.dragX,dragY:this.dragY,startLeft:this.mouseLeft0,startTop:this.mouseTop0}}destroy(){for(let[t]of this.mouseListeners)this.offMouse(null,t);this.mouseListeners.clear();for(let{event:t,target:e,handler:s,useCapture:i}of this.globalListeners)At(t,e,s,i);this.globalListeners.clear()}}class Rs{constructor(t){try{Se(t,"uplot","CursorManager","constructor"),this.uplot=t,this.cursor=null,this.showCursor=!1,this.cursorFocus=!1,this.cursorOnePt=!1,this.vCursor=null,this.hCursor=null,this.cursorPts=[],this.cursorPtsLft=[],this.cursorPtsTop=[],this.mouseLeft1=-10,this.mouseTop1=-10,this.rawMouseLeft1=-10,this.rawMouseTop1=-10,this.rect=null}catch(t){throw Me.report(t),t}}initCursor(t,e,s,i,l,r){this.cursor=q({},es,{drag:{y:2==i}},t.cursor),this.showCursor=this.cursor.show,this.cursor.idxs=s,this.cursor._lock=!1;let o=this.cursor.points;return o.show=k(o.show),o.size=k(o.size),o.stroke=k(o.stroke),o.fill=k(o.fill),this.cursorFocus=r.prox>=0,this.cursorOnePt=this.cursorFocus&&o.one,this.showCursor&&(this.cursor.x&&(this.vCursor=St("u-cursor-x",l)),this.cursor.y&&(this.hCursor=St("u-cursor-y",l))),null==this.cursor.dataIdx&&(this.cursor.dataIdx=this.createDataIdxFunction()),this.cursor}createDataIdxFunction(){return(t,e,s,i)=>{if(0==e)return s;let l=s,r=t.data,o=t.scales[t.series[0].scale],n=t.plotWidCss,h=t.plotHgtCss,a=(t.series[e].prox||(()=>1))(t,e,s,i)??b,u=a>=0&&b>a,c=0==o.ori?n:h,p=this.cursor.left,d=r[0],g=r[e],m=this.cursor.hover,x=m.skip=new Set(m.skip??[]);if(x.has(g[s])){l=null;let e=null,i=null,r=m.bias;if(0==r||-1==r){let t=s;for(;null==e&&t-- >0;)x.has(g[t])||(e=t)}if(0==r||1==r){let t=s;for(;null==i&&t++<g.length;)x.has(g[t])||(i=t)}if(null!=e||null!=i){let r=t.valToPosX;p-(null==e?-1/0:r(d[e],o,c,0))>(null==i?1/0:r(d[i],o,c,0))-p?null!=i&&(l=i):null!=e&&(l=e),null==l&&(l=null==i?e:null==e||s-e>i-s?i:e)}}else u&&f(p-(0,t.valToPosX)(d[s],o,c,0))>a&&(l=null);return l}}initCursorPt(t,e,s,i,l){let r=this.cursor.points.show(this.uplot,e);return r&&(mt(r,"u-cursor-pt"),mt(r,t.class),vt(r,-10,-10,i,l),s.insertBefore(r,this.cursorPts[e])),r}addCursorPt(t,e,s,i,l){if(!this.showCursor)return;let r=null;this.cursor.points.show(this.uplot,e)&&(r=this.initCursorPt(t,e,s,i,l)),this.cursorPts.splice(e,0,r),this.cursorPtsLft.splice(e,0,0),this.cursorPtsTop.splice(e,0,0)}removeCursorPt(t){if(!this.showCursor)return;let e=this.cursorPts.splice(t,1)[0];e&&e.remove(),this.cursorPtsLft.splice(t,1),this.cursorPtsTop.splice(t,1)}setCursor(t,e,s){return ye("CursorManager","setCursor",function(t,e,s){if(Se(t,"opts","CursorManager","setCursor"),"number"!=typeof t.left||"number"!=typeof t.top)throw new ce("setCursor requires opts.left and opts.top to be numbers","CursorManager",{method:"setCursor",opts:t,type:de});this.mouseLeft1=t.left,this.mouseTop1=t.top,this.updateCursor(null,e,s)}).call(this,t,e,s)}setCursorEvent(t){this.cursor.event=t}updateCursor(t,e,s){return ye("CursorManager","updateCursor",function(t,e){if(!this.cursor)throw new ce("Cursor not initialized - call initCursor first","CursorManager",{method:"updateCursor",type:pe});if(this.rawMouseLeft1=this.mouseLeft1,this.rawMouseTop1=this.mouseTop1,"function"==typeof this.cursor.move)try{[this.mouseLeft1,this.mouseTop1]=this.cursor.move(this.uplot,this.mouseLeft1,this.mouseTop1)}catch(t){throw new ce("Error in cursor move function: "+t.message,"CursorManager",{method:"updateCursor",type:me},t)}if(this.cursor.left=this.mouseLeft1,this.cursor.top=this.mouseTop1,this.showCursor&&(this.vCursor&&ve("CursorManager","updateCursor.vCursor",()=>{vt(this.vCursor,m(this.cursor.left),0,this.uplot.plotWidCss,this.uplot.plotHgtCss)}),this.hCursor&&ve("CursorManager","updateCursor.hCursor",()=>{vt(this.hCursor,0,m(this.cursor.top),this.uplot.plotWidCss,this.uplot.plotHgtCss)}),this.uplot.series&&Array.isArray(this.uplot.series)))for(let t=0;this.uplot.series.length>t;t++){let e=this.cursorPts[t];null!=e&&ve("CursorManager","updateCursor.hidePt",()=>{vt(e,-10,-10,this.uplot.plotWidCss,this.uplot.plotHgtCss)})}ve("CursorManager","updateCursor.updatePoints",()=>{this.updateCursorPoints()}),!1!==e&&"function"==typeof this.uplot.fire&&ve("CursorManager","updateCursor.fire",()=>{this.uplot.fire("setCursor")})}).call(this,t,e,s)}updateCursorPoints(){if(!this.showCursor)return;let t=this.uplot.series,e=this.uplot.data,s=this.uplot.activeIdxs;for(let i=0;t.length>i;i++){let l=t[i];if(0==i||!l.show)continue;let r=s[i];if(null==r)continue;let o=e[i];if(!o||r>=o.length)continue;let n=this.uplot.scales[t[0].scale],h=this.uplot.scales[l.scale];if(!n||!h)continue;let a=e[0][r],u=o[r];if(null==a||null==u)continue;let c=this.uplot.valToPosX(a,n,this.uplot.plotWidCss,0),p=this.uplot.valToPosY(u,h,this.uplot.plotHgtCss,0),d=this.cursorOnePt?this.cursorPts[0]:this.cursorPts[i];if(null!=d){this.cursorPtsLft[i]=c,this.cursorPtsTop[i]=p;let t=this.cursor.points.size(this.uplot,i);Lt(d,t,t),vt(d,x(c),x(p),this.uplot.plotWidCss,this.uplot.plotHgtCss),d.style.borderColor=this.cursor.points.stroke(this.uplot,i),d.style.backgroundColor=this.cursor.points.fill(this.uplot,i)}}}syncRect(t=!1){t?this.rect=null:(this.rect=this.uplot.over.getBoundingClientRect(),this.uplot.fire("syncRect",this.rect))}getRect(){return null==this.rect&&this.syncRect(!1),this.rect}cacheMouse(t,e,s,i,l,r,o,n,h){null==this.rect&&this.syncRect(!1),this.setCursorEvent(t),null!=t?this.updateCursor(null,!0,!0):this.updateCursor(e,!0,!1)}setSeriesOpacity(t,e){this.showCursor&&null!=this.cursorPts[t]&&(this.cursorPts[t].style.opacity=e)}scaleCursor(t,e){if(this.showCursor&&!this.uplot.shouldSetCursor&&this.cursor.left>=0){this.cursor.left*=t,this.cursor.top*=e,this.vCursor&&vt(this.vCursor,m(this.cursor.left),0,this.uplot.plotWidCss,this.uplot.plotHgtCss),this.hCursor&&vt(this.hCursor,0,m(this.cursor.top),this.uplot.plotWidCss,this.uplot.plotHgtCss);for(let s=0;this.cursorPts.length>s;s++){let i=this.cursorPts[s];null!=i&&(this.cursorPtsLft[s]*=t,this.cursorPtsTop[s]*=e,vt(i,x(this.cursorPtsLft[s]),x(this.cursorPtsTop[s]),this.uplot.plotWidCss,this.uplot.plotHgtCss))}}}destroy(){this.vCursor&&this.vCursor.remove(),this.hCursor&&this.hCursor.remove();for(let t of this.cursorPts)t&&t.remove();this.cursorPts=[],this.cursorPtsLft=[],this.cursorPtsTop=[],this.cursor=null,this.rect=null}}class Ds{constructor(t){try{Se(t,"uplot","LegendManager","constructor"),this.uplot=t,this.legend=null,this.showLegend=!1,this.markers=null,this.legendTable=null,this.legendHead=null,this.legendBody=null,this.legendRows=[],this.legendCells=[],this.legendCols=null,this.multiValLegend=!1,this.NULL_LEGEND_VALUES={},this.mouseListeners=new Map}catch(t){throw Me.report(t),t}}initLegend(t,e,s,i,l,r,o){return ye("LegendManager","initLegend",function(t,e,s,i,l){if(Se(t,"opts","LegendManager","initLegend"),Se(e,"series","LegendManager","initLegend"),Se(s,"activeIdxs","LegendManager","initLegend"),Se(l,"root","LegendManager","initLegend"),!Array.isArray(e))throw new ce("Series must be an array","LegendManager",{method:"initLegend",seriesType:typeof e,type:de});if(!Array.isArray(s))throw new ce("ActiveIdxs must be an array","LegendManager",{method:"initLegend",activeIdxsType:typeof s,type:de});try{if(this.legend=q({},Ze,t.legend),this.showLegend=this.legend.show,this.markers=this.legend.markers,this.legend&&(this.legend.idxs=s,this.markers.width=k(this.markers.width),this.markers.stroke=k(this.markers.stroke),this.markers.fill=k(this.markers.fill),this.markers.dash=k(this.markers.dash)),this.legend.live){const t=e[1]?e[1].values:null;this.multiValLegend=null!=t,this.legendCols=this.multiValLegend?t(this.uplot,1,0):{_:0};for(let t in this.legendCols)this.NULL_LEGEND_VALUES[t]=ut}this.showLegend&&(this.legendTable=yt("table","u-legend",l),this.legendBody=yt("tbody",null,this.legendTable),"function"==typeof this.legend.mount&&this.legend.mount(this.uplot,this.legendTable),this.multiValLegend&&(this.legendHead=yt("thead",null,this.legendTable,this.legendBody))),this.legend.values=[]}catch(t){throw new ce("Error initializing legend: "+t.message,"LegendManager",{method:"initLegend",type:pe},t)}return this.legend}).call(this,t,e,s,i,l,r,o)}initLegendRow(t,e,s,i,l,r){if(0==e&&(this.multiValLegend||!this.legend.live||2==i))return[null,null];let o=[],n=yt("tr","u-series",this.legendBody,this.legendBody.childNodes[e]);mt(n,t.class),t.show||mt(n,tt);let h=yt("th",null,n);if(this.markers.show){let t=St("u-marker",h);if(e>0){let s=this.markers.width(this.uplot,e);s&&(t.style.border=s+"px "+this.markers.dash(this.uplot,e)+" "+this.markers.stroke(this.uplot,e)),t.style.background=this.markers.fill(this.uplot,e)}}let a=St("u-label",h);for(var u in t.label instanceof HTMLElement?a.appendChild(t.label):a.textContent=t.label,e>0&&(this.markers.show||(a.style.color=t.width>0?this.markers.stroke(this.uplot,e):this.markers.fill(this.uplot,e)),this.onMouse("click",h,e=>{if(l._lock)return;this.uplot.setCursorEvent(e);let i=s.indexOf(t);if((e.ctrlKey||e.metaKey)!=this.legend.isolate){let t=s.some((t,e)=>e>0&&e!=i&&t.show);s.forEach((e,s)=>{s>0&&this.uplot.setSeries(s,t?s==i?{show:!0}:{show:!1}:{show:!0},!0,r.setSeries)})}else this.uplot.setSeries(i,{show:!t.show},!0,r.setSeries)},!1),l.focus&&this.onMouse("mouseenter",h,e=>{l._lock||(this.uplot.setCursorEvent(e),this.uplot.setSeries(s.indexOf(t),{focus:!0},!0,r.setSeries))},!1)),this.legendCols){let t=yt("td","u-value",n);t.textContent="--",o.push(t)}return[n,o]}addLegendRow(t,e,s,i,l,r){if(!this.showLegend)return;let o=this.initLegendRow(t,e,s,i,l,r);this.legendRows.splice(e,0,o[0]),this.legendCells.splice(e,0,o[1]),this.legend.values.push(null)}removeLegendRow(t){if(!this.showLegend)return;this.legend.values.splice(t,1),this.legendCells.splice(t,1);let e=this.legendRows.splice(t,1)[0];e&&(this.offMouse(null,e.firstChild),e.remove())}setLegend(t,e){if(null!=t&&(t.idxs?t.idxs.forEach((t,e)=>{this.uplot.activeIdxs[e]=t}):(t=>void 0===t)(t.idx)||this.uplot.activeIdxs.fill(t.idx),this.legend.idx=this.uplot.activeIdxs[0]),this.showLegend&&this.legend.live){for(let t=0;this.uplot.series.length>t;t++)(t>0||1==this.uplot.mode&&!this.multiValLegend)&&this.setLegendValues(t,this.uplot.activeIdxs[t]);this.syncLegend()}this.uplot.shouldSetLegend=!1,!1!==e&&this.uplot.fire("setLegend")}setLegendValues(t,e){let s,i=this.uplot.series[t],l=0==t&&2==this.uplot.xScaleDistr?this.uplot.data0:this.uplot.data[t];this.multiValLegend?s=i.values(this.uplot,t,e)??this.NULL_LEGEND_VALUES:(s=i.value(this.uplot,null==e?null:l[e],t,e),s=null==s?this.NULL_LEGEND_VALUES:{_:s}),this.legend.values[t]=s}syncLegend(){if(this.showLegend&&this.legend.live)for(let t=2==this.uplot.mode?1:0;this.uplot.series.length>t;t++){if(0==t&&this.multiValLegend)continue;let e=this.legend.values[t],s=0;for(let i in e)this.legendCells[t]&&this.legendCells[t][s]&&(this.legendCells[t][s].firstChild.nodeValue=e[i]),s++}}updateSeriesLegend(t,e){this.showLegend&&(e.show?xt(this.legendRows[t],tt):mt(this.legendRows[t],tt))}setSeriesOpacity(t,e){this.showLegend&&this.legendRows[t]&&(this.legendRows[t].style.opacity=e)}onMouse(t,e,s,i=!0){const l=this.mouseListeners.get(e)||{},r=this.uplot.cursor.bind[t](this.uplot,e,s,i);r&&(_t(t,e,l[t]=r),this.mouseListeners.set(e,l))}offMouse(t,e,s){const i=this.mouseListeners.get(e)||{};for(let s in i)null!=t&&s!=t||(At(s,e,i[s]),delete i[s]);null==t&&this.mouseListeners.delete(e)}destroy(){for(let[t,e]of this.mouseListeners)this.offMouse(null,t);this.mouseListeners.clear(),this.legendTable&&this.legendTable.remove(),this.legendRows=[],this.legendCells=[],this.legend=null}}class Is{constructor(t,e){try{Se(t,"uplot","SeriesManager","constructor"),Se(e,"scaleManager","SeriesManager","constructor"),this.uplot=t,this.scaleManager=e,this.series=[],this.mode=t.mode||1,this.linearPath=he(),this.pointsPath=le(),this._tzDate=null,this._fmtDate=null,this._timeSeriesVal=null}catch(t){throw Me.report(t),t}}initSeries(t,e){return ye("SeriesManager","initSeries",function(t){Se(t,"opts","SeriesManager","initSeries");const{series:e=[],ms:s=.001}=t;if(!Array.isArray(e))throw new ce("Series options must be an array","SeriesManager",{method:"initSeries",seriesOptsType:typeof e,type:de});this._tzDate=t.tzDate||(t=>new Date(Math.round(t/s))),this._fmtDate=t.fmtDate||(t=>t?new Date(t).toISOString():""),this._timeSeriesVal=je(this._tzDate,Je("",this._fmtDate));try{this.series=1==this.mode?this.setDefaults(e.length?e:[{},{}],ls,Ss,!1):this.setDefaults2(e.length?e:[null],ys)}catch(t){throw new ce("Error setting series defaults: "+t.message,"SeriesManager",{method:"initSeries",mode:this.mode,type:pe},t)}return this.series.forEach((t,e)=>{ve("SeriesManager",`processSeriesConfig[${e}]`,()=>{this.processSeriesConfig(t,e)})}),this.uplot.series=this.series,this.series}).call(this,t,e)}setDefaults(t,e,s,i){return(i?[t[0],t[1]].concat(t.slice(2)):[t[0]].concat(t.slice(1))).map((t,i)=>this.setDefault(t,i,e,s))}setDefaults2(t,e){return t.map((t,s)=>0==s?{}:q({},e,t))}setDefault(t,e,s,i){return q({},0==e?s:i,t)}processSeriesConfig(t,e){const{mode:s,_tzDate:i,_fmtDate:l,_timeSeriesVal:r}=this,{focus:o,cursor:n}=this.uplot,a=+h(this.uplot.opts?.pxAlign,1);if(1==s||e>0){let e=1==s&&this.scaleManager.scales[t.scale]?.time,o=t.value;t.value=e?B(o)?je(i,Je(o,l)):o||r:o||ms,t.label=t.label||(e?"Time":"Value")}if(o?.prox>=0&&n?.points?.one||e>0){t.width=null==t.width?1:t.width,t.paths=t.paths||this.linearPath||W,t.fillTo=k(t.fillTo||Kt),t.pxAlign=+h(t.pxAlign,a),t.pxRound=function(t){return 0==t?P:1==t?m:e=>I(e,t)}(t.pxAlign),t.stroke=k(t.stroke||null),t.fill=k(t.fill||null),t._stroke=t._fill=t._paths=t._focus=null;let e=function(t){return V(1*(3+2*(t||1)),3)}(y(1,t.width)),s=t.points=q({},{size:e,width:y(1,.2*e),stroke:t.stroke,space:2*e,paths:this.pointsPath,_stroke:null,_fill:null},t.points);s.show=k(s.show),s.filter=k(s.filter),s.fill=k(s.fill),s.stroke=k(s.stroke),s.paths=k(s.paths),s.pxAlign=t.pxAlign}}addSeries(t,e){try{if(Se(t,"opts","SeriesManager","addSeries"),"number"!=typeof(e=null==e?this.series.length:e)||0>e)throw new ce(`Invalid series index ${e}. Must be a non-negative number`,"SeriesManager",{method:"addSeries",seriesIndex:e,type:de});if(e>this.series.length)throw new ce(`Series index ${e} is out of bounds. Maximum allowed is ${this.series.length}`,"SeriesManager",{method:"addSeries",seriesIndex:e,maxIndex:this.series.length,type:de});return t=1==this.mode?this.setDefault(t,e,ls,Ss):this.setDefault(t,e,{},ys),this.series.splice(e,0,t),this.processSeriesConfig(this.series[e],e),"function"==typeof this.uplot.fire&&this.uplot.fire("addSeries",e),e}catch(t){throw Me.reportError(new ce(`Error adding series at index ${e}: ${t.message}`,"SeriesManager",{method:"addSeries",seriesIndex:e,type:ge},t)),t}}delSeries(t){return ye("SeriesManager","delSeries",function(t){if(Se(t,"i","SeriesManager","delSeries"),Ce(t,"number","i","SeriesManager","delSeries"),0>t||t>=this.series.length)throw new ce(`Invalid series index ${t}. Must be between 0 and ${this.series.length-1}`,"SeriesManager",{method:"delSeries",seriesIndex:t,seriesLength:this.series.length,type:de});if(0===t&&1===this.mode)throw new ce("Cannot delete the x-axis series (index 0) in mode 1","SeriesManager",{method:"delSeries",seriesIndex:t,mode:this.mode,type:de});try{this.series.splice(t,1),"function"==typeof this.uplot.fire&&this.uplot.fire("delSeries",t)}catch(e){throw new ce(`Error removing series at index ${t}: ${e.message}`,"SeriesManager",{method:"delSeries",seriesIndex:t,type:ge},e)}return t}).call(this,t)}setSeries(t,e,s,i){if(null==t||!this.series[t])return;let l=this.series[t];null!=e.focus&&this.setSeriesFocus(t,e.focus),null!=e.show&&this.setSeriesVisibility(t,e.show),null!=e.alpha&&this.setSeriesAlpha(t,e.alpha),q(l,e),!1!==s&&this.uplot.fire("setSeries",t,e),i&&this.uplot.pubSync&&this.uplot.pubSync("setSeries",this.uplot,t,e)}setSeriesFocus(t,e){null==t?this.series.forEach((t,e)=>{e>0&&(t._focus=null)}):this.series[t]&&(this.series[t]._focus=e)}setSeriesVisibility(t,e){this.series[t]&&(this.series[t].show=e)}setSeriesAlpha(t,e){this.series[t]&&(this.series[t].alpha=e)}resetYSeries(t){try{this.series.forEach((e,s)=>{s>0&&(e._paths=null,(t||null==e.min)&&(e.min=b,e.max=-b))})}catch(t){throw Me.reportError(new ce("Error resetting Y series: "+t.message,"SeriesManager",{method:"resetYSeries",type:ge},t)),t}}getOuterIdxs(t,e,s,i){let l=_(e-1,0,i-1),r=_(s+1,0,i-1);for(;null==t[l]&&l>0;)l--;for(;null==t[r]&&i-1>r;)r++;return[l,r]}cacheStrokeFill(t,e){let s=e?this.series[t].points:this.series[t];s._stroke=s.stroke(this.uplot,t),s._fill=s.fill(this.uplot,t)}generateSeriesPaths(t,e,s,i,l){let r=this.series[t];if(!r||0===t)return null;let o=2==this.mode?[0,e[t][0].length-1]:this.getOuterIdxs(e[t],s,i,l);return r.paths(this.uplot,t,o[0],o[1])}hasFocusedSeries(){return this.series.some(t=>t._focus)}getSeries(t){return this.series[t]}getAllSeries(){return this.series}getSeriesCount(){return this.series.length}isSeriesVisible(t){return!1!==this.series[t]?.show}getVisibleSeriesIndices(){return this.series.map((t,e)=>!1!==t.show?e:null).filter(t=>null!==t)}updateSeriesForScaleChange(t){this.series.forEach((e,s)=>{s>0&&(2==this.mode?t.y&&(e._paths=null):t[e.scale]&&(e._paths=null))})}prepareSeriesForDraw(t,e,s,i){const l=[];return this.series.forEach((r,o)=>{o>0&&r.show&&(this.cacheStrokeFill(o,!1),this.cacheStrokeFill(o,!0),null==r._paths&&(r._paths=this.generateSeriesPaths(o,t,e,s,i)),l.push({index:o,series:r,paths:r._paths,points:r.points}))}),l}getSeriesDrawInfo(t,e){let s=e?this.series[t].points:this.series[t];if(!s||!s._paths)return null;const{stroke:i=s._stroke,fill:l=s._fill,width:r=s.width,flags:o}=s._paths;return{strokeStyle:i,fillStyle:l,width:V(r*(this.uplot.pxRatio||1),3),flags:o,pxAlign:s.pxAlign,paths:s._paths}}}function Hs(e,s,i,l,r){let o=y(T(e),T(s)),n=s-e,h=t(r/l*n,i);do{let t=i[h],e=l*t/n;if(e>=r&&17>=o+(5>t?F.get(t):0))return[t,e]}while(++h<i.length);return[0,0]}function zs(t,e){let s,i;return[t=t.replace(/(\d+)px/,(t,l)=>(s=m((i=+l)*e))+"px"),s,i]}class Vs{constructor(t,e){try{Se(t,"uplot","AxisManager","constructor"),Se(e,"scaleManager","AxisManager","constructor"),this.uplot=t,this.scaleManager=e,this.axes=t.axes,this.scales=t.scales,this.series=t.series,this.sidesWithAxes=[!1,!1,!1,!1]}catch(t){throw Me.report(t),t}}initAxes(t){return ye("AxisManager","initAxes",function(t){Se(t,"opts","AxisManager","initAxes");const{uplot:e}=this,{mode:s,pxRatio:i,wrap:l}=e,r=e.series;if(!r||!Array.isArray(r)||0===r.length)throw new ce("No series available for axis initialization","AxisManager",{method:"initAxes",seriesLength:r?.length,type:pe});const o=2==s?r[1]?.facets?.[0]?.scale||"x":r[0]?.scale||"x",n=e.axesConfig||[];if(!Array.isArray(n))throw new ce("Axes array not properly initialized","AxisManager",{method:"initAxes",axesType:typeof n,type:pe});this.axes=n,this.axes.forEach((t,e)=>{ve("AxisManager",`initAxis[${e}]`,()=>{this.initAxis(t,e,o,i,l)})})}).call(this,t)}initAxis(t,e,s,i,l){const{uplot:r,scales:o,series:n}=this,{ms:h,_timeAxisSplits:a,_timeAxisVals:u,_fmtDate:c,_tzDate:p}=r;if(t._show=t.show,t.show){let d=o[t.scale];null==d&&(t.scale=t.side%2?n[1].scale:s,d=o[t.scale]);let f=d.time;t.size=k(t.size),t.space=k(t.space),t.rotate=k(t.rotate),X(t.incrs)&&t.incrs.forEach(t=>{!F.has(t)&&F.set(t,O(t))}),t.incrs=k(t.incrs||(2==d.distr?ke:f?1==h?Ye:Xe:Pe)),t.splits=k(t.splits||(f&&1==d.distr?a:3==d.distr?ns:4==d.distr?hs:os)),t.stroke=k(t.stroke),t.grid.stroke=k(t.grid.stroke),t.ticks.stroke=k(t.ticks.stroke),t.border.stroke=k(t.border.stroke);let g=t.values;t.values=X(g)&&!X(g[0])?k(g):f?X(g)?function(t,e){return(s,i,l,r,o)=>{let n,h,a,u,c,p,d=e.find(t=>o>=t[0])||e[e.length-1];return i.map(e=>{let s=t(e),i=s.getFullYear(),l=s.getMonth(),r=s.getDate(),o=s.getHours(),f=s.getMinutes(),g=s.getSeconds(),m=i!=n&&d[2]||l!=h&&d[3]||r!=a&&d[4]||o!=u&&d[5]||f!=c&&d[6]||g!=p&&d[7]||d[1];return n=i,h=l,a=r,u=o,c=f,p=g,m(s)})}}(p,function(t,e){return t.map(t=>t.map((s,i)=>0==i||8==i||null==s?s:e(1==i||0==t[8]?s:t[1]+s)))}(g,c)):B(g)?function(t,e){let s=zt(e);return(e,i)=>i.map(e=>s(t(e)))}(p,g):g||u:g||rs,t.filter=k(t.filter||(3>d.distr||10!=d.log?3==d.distr&&2==d.log?gs:E:fs)),t.font=zs(t.font,i),t.labelFont=zs(t.labelFont,i),t._size=t.size(r,null,e,0),t._space=t._rotate=t._incrs=t._found=t._splits=t._values=null,t._size>0&&(this.sidesWithAxes[e]=!0,t._el=St("u-axis",l))}}getIncrSpace(t,e,s,i){return ye("AxisManager","getIncrSpace",function(t,e,s,i){if(Se(t,"axisIdx","AxisManager","getIncrSpace"),Ce(t,"number","axisIdx","AxisManager","getIncrSpace"),Se(e,"min","AxisManager","getIncrSpace"),Se(s,"max","AxisManager","getIncrSpace"),Se(i,"fullDim","AxisManager","getIncrSpace"),Ce(i,"number","fullDim","AxisManager","getIncrSpace"),0>t||t>=this.axes.length)throw new ce(`Invalid axis index ${t}. Must be between 0 and ${this.axes.length-1}`,"AxisManager",{method:"getIncrSpace",axisIdx:t,axesLength:this.axes.length,type:de});const{uplot:l}=this;let r,o=this.axes[t];if(!o)throw new ce(`Axis at index ${t} is null or undefined`,"AxisManager",{method:"getIncrSpace",axisIdx:t,type:de});if(i>0)try{let n=o._space=o.space(l,t,e,s,i);r=Hs(e,s,o._incrs=o.incrs(l,t,e,s,i,n),i,n)}catch(l){throw new ce("Error calculating increment space: "+l.message,"AxisManager",{method:"getIncrSpace",axisIdx:t,min:e,max:s,fullDim:i,type:we},l)}else r=[0,0];return o._found=r}).call(this,t,e,s,i)}axesCalc(t,e,s,i,l){return ye("AxisManager","axesCalc",function(t,e,s,i,l){Se(t,"cycleNum","AxisManager","axesCalc"),Se(e,"plotWidCss","AxisManager","axesCalc"),Se(s,"plotHgtCss","AxisManager","axesCalc"),Ce(e,"number","plotWidCss","AxisManager","axesCalc"),Ce(s,"number","plotHgtCss","AxisManager","axesCalc");const{uplot:r,axes:o,scales:n}=this;if(!o||!Array.isArray(o))throw new ce("Axes not properly initialized","AxisManager",{method:"axesCalc",axesType:typeof o,type:pe});let h=!0;return o.forEach((o,a)=>{ve("AxisManager",`axesCalc[${a}]`,()=>{if(!o.show)return;let u=n[o.scale];if(!u)throw new ce(`Scale '${o.scale}' not found for axis ${a}`,"AxisManager",{method:"axesCalc",axisIndex:a,scaleKey:o.scale,type:de});if(null==u.min)return void(o._show&&(h=!1,o._show=!1,"function"==typeof l&&l(!1)));o._show||(h=!1,o._show=!0,"function"==typeof l&&l(!1));let c=o.side,p=c%2,{min:d,max:f}=u,[g,m]=this.getIncrSpace(a,d,f,0==p?e:s);if(0==m)return;let w=2==u.distr;try{let e=o._splits=o.splits(r,a,d,f,g,m,w),s=2==u.distr?e.map(t=>i[t]):e,l=2==u.distr?i[e[1]]-i[e[0]]:g,n=o._values=o.values(r,o.filter(r,s,a,m,l),a,m,l);o._rotate=2==c?o.rotate(r,n,a,m):0;let p=o._size;o._size=x(o.size(r,n,a,t)),null!=p&&o._size!=p&&(h=!1)}catch(t){throw new ce(`Error calculating axis ${a}: ${t.message}`,"AxisManager",{method:"axesCalc",axisIndex:a,type:we},t)}})}),h}).call(this,t,e,s,i,l)}calcAxesRects(t,e,s,i){const{axes:l}=this;let r=t+s,o=e+i,n=t,h=e;function a(t,e){switch(t){case 1:return r+=e,r-e;case 2:return o+=e,o-e;case 3:return n-=e,n+e;case 0:return h-=e,h+e}}l.forEach(t=>{if(t.show&&t._show){let e=t.side;t._pos=a(e,t._size),null!=t.label&&(t._lpos=a(e,t.labelSize))}})}drawOrthoLines(t,e,s,i,l,r,o,n,h,a,u,c,p){let d=n%2/2;1==c&&t.translate(d,d),p(h,n,a,u,h),t.beginPath();let f,g,m,x,w=r+(0==l||3==l?-o:o);0==i?(g=r,x=w):(f=r,m=w);for(let l=0;e.length>l;l++)null!=s[l]&&(0==i?f=m=e[l]:g=x=e[l],t.moveTo(f,g),t.lineTo(m,x));t.stroke(),1==c&&t.translate(-d,-d)}drawAxesGrid(t,e,s,i,l,r,o,n,h,a,u,c,p){const{uplot:f,axes:g,scales:x}=this;for(let p=0;g.length>p;p++){let w=g[p];if(!w.show||!w._show)continue;let y,S,C=w.side,v=C%2,M=w.stroke(f,p),L=0==C||3==C?-1:1,[b,T]=w._found;if(null!=w.label){let e=m((w._lpos+w.labelGap*L)*o);u(w.labelFont[0],M,"center",2==C?et:st),t.save(),1==v?(y=S=0,t.translate(e,m(i+r/2)),t.rotate((3==C?-d:d)/2)):(y=m(s+l/2),S=e);let n=A(w.label)?w.label(f,p,b,T):w.label;t.fillText(n,y,S),t.restore()}if(0==T)continue;let _=x[w.scale],k=0==v?l:r,P=0==v?s:i,E=w._splits,W=2==_.distr?E.map(t=>e[t]):E,R=2==_.distr?e[E[1]]-e[E[0]]:b,D=w.ticks,I=w.border,H=D.show?D.size:0,z=m(H*o),F=m((2==w.alignTo?w._size-H-w.gap:w.gap)*o),O=w._rotate*-d/180,$=h(w._pos*o),Y=$+(z+F)*L;S=0==v?Y:0,y=1==v?Y:0,u(w.font[0],M,1==w.align?it:2==w.align?lt:O>0?it:0>O?lt:0==v?"center":3==C?lt:it,O||1==v?"middle":2==C?et:st);let K=w.font[1]*w.lineGap,N=E.map(t=>h(a(t,_,k,P))),X=w._values;for(let e=0;X.length>e;e++){let s=X[e];if(null!=s){0==v?y=N[e]:S=N[e],s=""+s;let i=-1==s.indexOf("\n")?[s]:s.split(/\n/gm);for(let e=0;i.length>e;e++){let s=i[e];O?(t.save(),t.translate(y,S+e*K),t.rotate(O),t.fillText(s,0,0),t.restore()):t.fillText(s,y,S+e*K)}}}D.show&&this.drawOrthoLines(t,N,D.filter(f,W,p,T,R),v,C,$,z,V(D.width*o,3),D.stroke(f,p),D.dash,D.cap,n,c);let G=w.grid;G.show&&this.drawOrthoLines(t,N,G.filter(f,W,p,T,R),v,0==v?2:1,0==v?i:s,0==v?r:l,V(G.width*o,3),G.stroke(f,p),G.dash,G.cap,n,c),I.show&&this.drawOrthoLines(t,[$],[1],0==v?1:0,0==v?1:2,1==v?i:s,1==v?r:l,V(I.width*o,3),I.stroke(f,p),I.dash,I.cap,n,c)}p("drawAxes")}syncFontSizes(t){this.axes.forEach(e=>function(t,e){t.show&&[t.font,t.labelFont].forEach(t=>{let s=V(t[2]*e,1);t[0]=t[0].replace(/[0-9.]+px/,s+"px"),t[1]=s})}(e,t))}}class Fs{constructor(t,e){try{if(Se(t,"uplot","Renderer","constructor"),Se(e,"layoutManager","Renderer","constructor"),!t.ctx)throw new ce("uPlot instance missing canvas context","Renderer",{method:"constructor",type:pe});this.u=t,this.layoutManager=e,this.ctx=t.ctx,this.can=t.can,this.ctxStroke=null,this.ctxFill=null,this.ctxWidth=null,this.ctxDash=null,this.ctxJoin=null,this.ctxCap=null,this.ctxFont=null,this.ctxAlign=null,this.ctxBaseline=null,this.ctxAlpha=1,this.drawOrderMap={axes:()=>this.drawAxesGrid(),series:()=>this.drawSeries()};const s=t.opts?.drawOrder||["axes","series"];if(!Array.isArray(s))throw new ce("drawOrder option must be an array","Renderer",{method:"constructor",drawOrderType:typeof s,type:de});this.drawOrder=s.map(t=>{if(!this.drawOrderMap[t])throw new ce(`Invalid draw order key: ${t}. Valid keys are: ${Object.keys(this.drawOrderMap).join(", ")}`,"Renderer",{method:"constructor",invalidKey:t,type:de});return this.drawOrderMap[t]}),this.CLIP_FILL_STROKE=3}catch(t){throw Me.report(t),t}}initCanvas(t){return ye("Renderer","initCanvas",function(){const{pxRatio:t}=this.u,{fullWidCss:e,fullHgtCss:s}=this.layoutManager;if("number"!=typeof t||0>=t)throw new ce(`Invalid pixel ratio: ${t}. Must be a positive number`,"Renderer",{method:"initCanvas",pxRatio:t,type:de});if("number"!=typeof e||"number"!=typeof s)throw new ce(`Invalid canvas dimensions: width=${e}, height=${s}. Both must be numbers`,"Renderer",{method:"initCanvas",fullWidCss:e,fullHgtCss:s,type:de});if(0>=e||0>=s)throw new ce(`Invalid canvas dimensions: width=${e}, height=${s}. Both must be positive`,"Renderer",{method:"initCanvas",fullWidCss:e,fullHgtCss:s,type:de});try{this.can.width=m(e*t),this.can.height=m(s*t),this.can.style.width=e+"px",this.can.style.height=s+"px",this.invalidateStyleCache()}catch(i){throw new ce("Error initializing canvas: "+i.message,"Renderer",{method:"initCanvas",fullWidCss:e,fullHgtCss:s,pxRatio:t,type:fe},i)}}).call(this,t)}draw(){return ye("Renderer","draw",function(){const{fullWidCss:t,fullHgtCss:e}=this.layoutManager;if(t>0&&e>0)try{this.clear(),"function"==typeof this.u.fire&&this.u.fire("drawClear"),this.drawOrder.forEach((t,e)=>{ve("Renderer",`drawOrder[${e}]`,t)}),"function"==typeof this.u.fire&&this.u.fire("draw")}catch(s){throw new ce("Error during rendering: "+s.message,"Renderer",{method:"draw",fullWidCss:t,fullHgtCss:e,type:fe},s)}}).call(this)}clear(){return ye("Renderer","clear",function(){if(!this.ctx)throw new ce("Canvas context not available","Renderer",{method:"clear",type:fe});try{this.ctx.clearRect(0,0,this.can.width,this.can.height)}catch(t){throw new ce("Error clearing canvas: "+t.message,"Renderer",{method:"clear",canvasWidth:this.can.width,canvasHeight:this.can.height,type:fe},t)}}).call(this)}drawSeries(){const{series:t,data:e,focus:s,mode:i}=this.u;if((e[0]?.length||0)>0){let l=t.some(t=>t._focus)&&this.ctxAlpha!=s.alpha;l&&(this.ctx.globalAlpha=this.ctxAlpha=s.alpha),t.forEach((t,s)=>{if(s>0&&t.show&&(this.cacheStrokeFill(s,!1),this.cacheStrokeFill(s,!0),null==t._paths)){let l=this.ctxAlpha;this.ctxAlpha!=t.alpha&&(this.ctx.globalAlpha=this.ctxAlpha=t.alpha);let r=2==i?[0,e[s][0].length-1]:this.getOuterIdxs(e[s]);t._paths=t.paths(this.u,s,r[0],r[1]),this.ctxAlpha!=l&&(this.ctx.globalAlpha=this.ctxAlpha=l)}}),t.forEach((t,e)=>{if(e>0&&t.show){let s=this.ctxAlpha;if(this.ctxAlpha!=t.alpha&&(this.ctx.globalAlpha=this.ctxAlpha=t.alpha),null!=t._paths&&this.drawPath(e,!1),t.points){let s=null!=t._paths?t._paths.gaps:null,i=t.points.show(this.u,e,this.u.i0,this.u.i1,s),l=t.points.filter(this.u,e,i,s);(i||l)&&(t.points._paths=t.points.paths(this.u,e,this.u.i0,this.u.i1,l),this.drawPath(e,!0))}this.ctxAlpha!=s&&(this.ctx.globalAlpha=this.ctxAlpha=s),this.u.fire("drawSeries",e)}}),l&&(this.ctx.globalAlpha=this.ctxAlpha=1)}}drawAxesGrid(){const{axes:t,scales:e,data:s,plotLft:i,plotTop:l,plotWid:r,plotHgt:o,pxRatio:n}=this.u,h=s[0];for(let s=0;t.length>s;s++){let a=t[s];if(!a.show||!a._show)continue;let u=a.side,c=u%2,p=a.stroke(this.u,s),d=0==u||3==u?-1:1,[f,g]=a._found;if(null!=a.label&&this.drawAxisLabel(a,s,c,u,p,d,f,g),0==g)continue;let x=e[a.scale],w=0==c?r:o,y=0==c?i:l,S=a._splits,C=2==x.distr?S.map(t=>h[t]):S,v=2==x.distr?h[S[1]]-h[S[0]]:f,M=a.ticks,L=a.border,b=M.show?M.size:0,T=m(b*n),_=m((2==a.alignTo?a._size-b-a.gap:a.gap)*n),A=this.u.pxRound(a._pos*n),k=S.map(t=>this.u.pxRound(this.u.getPos(t,x,w,y)));this.drawTickLabels(a,s,c,u,A,T,_,d,k,p),M.show&&this.drawOrthoLines(k,M.filter(this.u,C,s,g,v),c,u,A,T,V(M.width*n,3),M.stroke(this.u,s),M.dash,M.cap);let P=a.grid;P.show&&this.drawOrthoLines(k,P.filter(this.u,C,s,g,v),c,0==c?2:1,0==c?l:i,0==c?o:r,V(P.width*n,3),P.stroke(this.u,s),P.dash,P.cap),L.show&&this.drawOrthoLines([A],[1],0==c?1:0,0==c?1:2,1==c?l:i,1==c?o:r,V(L.width*n,3),L.stroke(this.u,s),L.dash,L.cap)}this.u.fire("drawAxes")}drawAxisLabel(t,e,s,i,l,r,o,n){const{plotLft:h,plotTop:a,plotWid:u,plotHgt:c,pxRatio:p,isFn:d,PI:f}=this.u;let g,x,w=m((t._lpos+t.labelGap*r)*p);this.setFontStyle(t.labelFont[0],l,"center",2==i?et:st),this.ctx.save(),1==s?(g=x=0,this.ctx.translate(w,m(a+c/2)),this.ctx.rotate((3==i?-f:f)/2)):(g=m(h+u/2),x=w);let y=d(t.label)?t.label(this.u,e,o,n):t.label;this.ctx.fillText(y,g,x),this.ctx.restore()}drawTickLabels(t,e,s,i,l,r,o,n,h,a){const{PI:u}=this.u;let c=t._rotate*-u/180,p=l+(r+o)*n,d=0==s?p:0,f=1==s?p:0;this.setFontStyle(t.font[0],a,1==t.align?it:2==t.align?lt:c>0?it:0>c?lt:0==s?"center":3==i?lt:it,c||1==s?"middle":2==i?et:st);let g=t.font[1]*t.lineGap,m=t._values;for(let t=0;m.length>t;t++){let e=m[t];if(null!=e){0==s?f=h[t]:d=h[t],e=""+e;let i=-1==e.indexOf("\n")?[e]:e.split(/\n/gm);for(let t=0;i.length>t;t++){let e=i[t];c?(this.ctx.save(),this.ctx.translate(f,d+t*g),this.ctx.rotate(c),this.ctx.fillText(e,0,0),this.ctx.restore()):this.ctx.fillText(e,f,d+t*g)}}}}cacheStrokeFill(t,e){const{series:s}=this.u;let i=e?s[t].points:s[t];i._stroke=i.stroke(this.u,t),i._fill=i.fill(this.u,t)}drawPath(t,e){const{series:s,plotLft:i,plotTop:l,plotWid:r,plotHgt:o,pxRatio:n}=this.u;let h=e?s[t].points:s[t],{stroke:a,fill:u,clip:c,flags:p,_stroke:d=h._stroke,_fill:f=h._fill,_width:g=h.width}=h._paths;g=V(g*n,3);let m=null,x=g%2/2;e&&null==f&&(f=g>0?"#fff":d);let w=1==h.pxAlign&&x>0;if(w&&this.ctx.translate(x,x),!e){let t=i-g/2,e=l-g/2,s=r+g,n=o+g;m=new Path2D,m.rect(t,e,s,n)}e?this.strokeFill(d,g,h.dash,h.cap,f,a,u,p,c):this.fillStroke(t,d,g,h.dash,h.cap,f,a,u,p,m,c),w&&this.ctx.translate(-x,-x)}fillStroke(t,e,s,i,l,r,o,n,h,a,u){const{bands:c,series:p,data:d,hasData:f,i0:g,i1:m,isArr:x,EMPTY_OBJ:w}=this.u;let y=!1;0!=h&&c.forEach((c,S)=>{if(c.series[0]==t){let t,C=p[c.series[1]],v=d[c.series[1]],M=(C._paths||w).band;x(M)&&(M=1==c.dir?M[0]:M[1]);let L=null;C.show&&M&&f(v,g,m)?(L=c.fill(this.u,S)||r,t=C._paths.clip):M=null,this.strokeFill(e,s,i,l,L,o,n,h,a,u,t,M),y=!0}}),y||this.strokeFill(e,s,i,l,r,o,n,h,a,u)}strokeFill(t,e,s,i,l,r,o,n,h,a,u,c){this.setCtxStyle(t,e,s,i,l),(h||a||c)&&(this.ctx.save(),h&&this.ctx.clip(h),a&&this.ctx.clip(a)),c?(n&this.CLIP_FILL_STROKE)==this.CLIP_FILL_STROKE?(this.ctx.clip(c),u&&this.ctx.clip(u),this.doFill(l,o),this.doStroke(t,r,e)):2&n?(this.doFill(l,o),this.ctx.clip(c),this.doStroke(t,r,e)):1&n&&(this.ctx.save(),this.ctx.clip(c),u&&this.ctx.clip(u),this.doFill(l,o),this.ctx.restore(),this.doStroke(t,r,e)):(this.doFill(l,o),this.doStroke(t,r,e)),(h||a||c)&&this.ctx.restore()}doStroke(t,e,s){s>0&&(e instanceof Map?e.forEach((t,e)=>{this.ctx.strokeStyle=this.ctxStroke=e,this.ctx.stroke(t)}):null!=e&&t&&this.ctx.stroke(e))}doFill(t,e){e instanceof Map?e.forEach((t,e)=>{this.ctx.fillStyle=this.ctxFill=e,this.ctx.fill(t)}):null!=e&&t&&this.ctx.fill(e)}drawOrthoLines(t,e,s,i,l,r,o,n,h,a){const{pxAlign:u}=this.u;let c=o%2/2;1==u&&this.ctx.translate(c,c),this.setCtxStyle(n,o,h,a,n),this.ctx.beginPath();let p,d,f,g,m=l+(0==i||3==i?-r:r);0==s?(d=l,g=m):(p=l,f=m);for(let i=0;t.length>i;i++)null!=e[i]&&(0==s?p=f=t[i]:d=g=t[i],this.ctx.moveTo(p,d),this.ctx.lineTo(f,g));this.ctx.stroke(),1==u&&this.ctx.translate(-c,-c)}setCtxStyle(t,e,s,i,l,r){t??="#0000",s??=K,i??="butt",r??="round",t!=this.ctxStroke&&(this.ctx.strokeStyle=this.ctxStroke=t),l!=this.ctxFill&&(this.ctx.fillStyle=this.ctxFill=l),e!=this.ctxWidth&&(this.ctx.lineWidth=this.ctxWidth=e),s!=this.ctxDash&&this.ctx.setLineDash(this.ctxDash=s),i!=this.ctxCap&&(this.ctx.lineCap=this.ctxCap=i),r!=this.ctxJoin&&(this.ctx.lineJoin=this.ctxJoin=r)}setFontStyle(t,e,s,i){e!=this.ctxFill&&(this.ctx.fillStyle=this.ctxFill=e),t!=this.ctxFont&&(this.ctx.font=this.ctxFont=t),s!=this.ctxAlign&&(this.ctx.textAlign=this.ctxAlign=s),i!=this.ctxBaseline&&(this.ctx.textBaseline=this.ctxBaseline=i)}getOuterIdxs(t){let e=0,s=t.length-1;for(;s>=e&&null==t[e];)e++;for(;s>=e&&null==t[s];)s--;return[e,s]}invalidateStyleCache(){this.ctxStroke=this.ctxFill=this.ctxWidth=this.ctxJoin=this.ctxCap=this.ctxFont=this.ctxAlign=this.ctxBaseline=this.ctxDash=null,this.ctxAlpha=1}}class Os{constructor(t,e,s){this.opts=Z(t),this.data=e||[],this._data=this.data,this.target=s,this.status=0,this.ready=!1,this.pxRatio=t.pxRatio??ft,this.mode=h(t.mode,1),this._width=t.width||800,this._height=t.height||400,this.initDOM(),this.initManagers(),this.initConfiguration(),this.processPlugins(),this.initSystems(),e&&e.length>0&&this.setData(e,!1),this.ready=!0,this.status=1,this.fire("ready")}initDOM(){this.root=St("uplot"),null!=this.opts.id&&(this.root.id=this.opts.id),mt(this.root,this.opts.class),this.opts.title&&(St("u-title",this.root).textContent=this.opts.title),this.can=yt("canvas"),this.ctx=this.can.getContext("2d"),this.wrap=St("u-wrap",this.root),this.under=St("u-under",this.wrap),this.wrap.appendChild(this.can),this.over=St("u-over",this.wrap),this.bbox={},this.target&&("function"==typeof this.target?this.target(this,()=>{}):this.target.appendChild(this.root))}initManagers(){this.layout=new Le(this),this.scales=new Es(this,this.opts),this.events=new Ws(this),this.cursor=new Rs(this),this.legend=new Ds(this),this.series=new Is(this,this.scales),this.axes=new Vs(this,this.scales),this.renderer=new Fs(this,this.layout)}initConfiguration(){this.pxAlign=+h(this.opts.pxAlign,1),this.pxRound=this.pxRoundGen(this.pxAlign),this.ms=this.opts.ms||.001,this.focus=q({},this.opts.focus||{alpha:.3}),this.bands=this.opts.bands||[],this.bands.forEach(t=>{t.fill=k(t.fill||null),t.dir=h(t.dir,-1)}),this.shouldSetScales=!1,this.shouldSetSize=!1,this.shouldConvergeSize=!1,this.shouldSetCursor=!1,this.shouldSetSelect=!1,this.shouldSetLegend=!1,this.activeIdxs=[],this.i0=null,this.i1=null,this.data0=null,this.select={show:!1,over:!0,left:0,width:0,top:0,height:0}}processPlugins(){(this.opts.plugins||[]).forEach(t=>{t.opts&&(this.opts=t.opts(this,this.opts)||this.opts)})}initSystems(){this.series.initSeries(this.opts,this.data),this.axesConfig=this.axesConfig||[],this.opts.axes&&(this.axesConfig=this.opts.axes),this.scales.initScales(),this.axes.initAxes(this.opts),this.cursor.initCursor(this.opts,this.series,this.activeIdxs,this.mode,this.over,this.focus),this.legend.initLegend(this.opts,this.series,this.activeIdxs,this.mode,this.root,this.cursor.cursor,{}),this.events.initEvents(this.opts);const t=this.scales.getXScale();mt(this.root,t&&0==t.ori?"u-hz":"u-vt"),this.layout.calcSize(this._width,this._height),this.renderer.initCanvas(this.opts)}setPxRatio(t){this.pxRatio=t??ft,this.axes.syncFontSizes(this.pxRatio),this._setSize(this._width,this._height,!0)}setData(t,e=!0){if(this.data=null==t?[]:t,this._data=this.data,2==this.mode){this.dataLen=0;for(let t=1;this.series.series.length>t;t++)this.dataLen+=this.data[t][0].length}else{0==this.data.length&&(this.data=this._data=[[]]),this.data0=this.data[0],this.dataLen=this.data0.length;let t=this.data;if(2==this.scales.getXScale().distr){t=this.data.slice();let e=t[0]=Array(this.dataLen);for(let t=0;this.dataLen>t;t++)e[t]=t}this._data=this.data=t}if(this.series.resetYSeries(!0),this.fire("setData"),!1!==e){let t=this.scales.getXScale();t.auto(this,this.scales.viaAutoScaleX)?this.scales.autoScaleX():this.scales._setScale(this.scales.xScaleKey,t.min,t.max),this.shouldSetCursor=this.shouldSetCursor||this.cursor.cursor.left>=0,this.shouldSetLegend=!0,this.commit()}}setSize(t){this._setSize(t.width,t.height)}_setSize(t,e,s){(s||t!=this.width||e!=this.height)&&this.layout.calcSize(t,e),this.series.resetYSeries(!1),this.shouldConvergeSize=!0,this.shouldSetSize=!0,this.commit()}addSeries(t,e){return e=this.series.addSeries(t,e),this.cursor.showCursor&&this.cursor.addCursorPt(this.series.series[e],e,this.over,this.layout.plotWidCss,this.layout.plotHgtCss),this.legend.showLegend&&this.legend.addLegendRow(this.series.series[e],e,this.series.series,this.mode,this.cursor.cursor,{}),e}delSeries(t){return this.series.delSeries(t),this.cursor.showCursor&&this.cursor.removeCursorPt(t),this.legend.showLegend&&this.legend.removeLegendRow(t),t}setSeries(t,e,s,i){this.series.setSeries(t,e,s,i),this.legend.showLegend&&null!=e.show&&this.legend.updateSeriesLegend(t,this.series.series[t])}setCursor(t,e,s){this.cursor.setCursor(t,e,s)}setLegend(t,e){this.legend.setLegend(t,e)}setSelect(t,e){q(this.select,t),this.shouldSetSelect=!0,!1!==e&&this.commit()}commit(){if(this.ready){if(this.shouldConvergeSize&&(this.layout.convergeSize(this._width,this._height),this.shouldConvergeSize=!1),this.shouldSetSize&&(this.renderer.initCanvas(this.opts),this.shouldSetSize=!1),this.shouldSetScales){let t=this.scales.setScales();this.series.updateSeriesForScaleChange(t),this.shouldSetScales=!1}this.shouldSetCursor&&(this.cursor.updateCursor(),this.shouldSetCursor=!1),this.shouldSetLegend&&(this.legend.setLegend(),this.shouldSetLegend=!1),this.renderer.draw()}}destroy(){this.fire("destroy"),this.events.destroy(),this.cursor.destroy(),this.legend.destroy(),this.root.parentNode&&this.root.parentNode.removeChild(this.root),this.ready=!1,this.status=0}fire(t,...e){this.opts.hooks&&this.opts.hooks[t]&&this.opts.hooks[t].forEach(t=>t(this,...e))}pubSync(t,e,...s){this.opts.sync&&Ot.pub(t,e,...s)}pxRoundGen(t){return 1==t?t=>m(t):e=>I(e,t)}getPos(t,e,s,i){return this.scales.getPos(t,e,s,i)}valToPosX(t,e,s,i){return this.scales.valToPosX(t,e,s,i)}valToPosY(t,e,s,i){return this.scales.valToPosY(t,e,s,i)}posToValX(t,e){return this.scales.posToValX(t,e)}posToValY(t,e,s){return this.scales.posToValY(t,e,s)}posToIdx(t,e=!1){const s=this.posToVal(t,this.scales.xScaleKey,e);return this.valToIdx(s)}posToVal(t,e,s=!1){const i=this.scales.scales[e];return i?0===i.ori?this.posToValX(t,s):this.posToValY(t,e,s):null}valToPos(t,e,s=!1){const i=this.scales.scales[e];return i?0===i.ori?this.valToPosX(t,i,s?this.plotWid:this.plotWidCss,s?this.plotLft:this.plotLftCss):this.valToPosY(t,i,s?this.plotHgt:this.plotHgtCss,s?this.plotTop:this.plotTopCss):null}valToIdx(t){if(!this.data0||0===this.data0.length)return 0;let e=0,s=this.data0.length-1;for(;s>=e;){const i=Math.floor((e+s)/2),l=this.data0[i];if(l===t)return i;t>l?e=i+1:s=i-1}return this.data0.length>e?0>s?0:Math.abs(this.data0[e]-t)>Math.abs(this.data0[s]-t)?s:e:this.data0.length-1}redraw(t=!0,e=!1){t&&this.series.resetYSeries(!0),e&&(this.shouldSetScales=!0),this.commit()}batch(t,e=!1){"function"==typeof t&&t()}get rect(){return this.cursor.rect||{left:0,top:0,width:this.plotWidCss,height:this.plotHgtCss}}syncRect(t){this.cursor.syncRect(t)}updateCursor(t,e,s){this.cursor.updateCursor(t,e,s)}setCursorEvent(t){this.cursor.setCursorEvent(t)}get width(){return this.layout.fullWidCss}get height(){return this.layout.fullHgtCss}get plotWidCss(){return this.layout.plotWidCss}get plotHgtCss(){return this.layout.plotHgtCss}get plotLftCss(){return this.layout.plotLftCss}get plotTopCss(){return this.layout.plotTopCss}get plotLft(){return this.layout.plotLft}get plotTop(){return this.layout.plotTop}get plotWid(){return this.layout.plotWid}get plotHgt(){return this.layout.plotHgt}get xScaleDistr(){const t=this.scales.getXScale();return t?t.distr:1}}function $s(t,e,s){return new Os(t,e,s)}$s.assign=q,$s.fmtNum=c,$s.rangeNum=n,$s.rangeLog=s,$s.rangeAsinh=i,$s.orient=$t,$s.pxRatio=ft,$s.join=function(t,e){if(function(t){let e=t[0][0],s=e.length;for(let i=1;t.length>i;i++){let l=t[i][0];if(l.length!=s)return!1;if(l!=e)for(let t=0;s>t;t++)if(l[t]!=e[t])return!1}return!0}(t)){let e=t[0].slice();for(let s=1;t.length>s;s++)e.push(...t[s].slice(1));return function(t,e=100){const s=t.length;if(1>=s)return!0;let i=0,l=s-1;for(;l>=i&&null==t[i];)i++;for(;l>=i&&null==t[l];)l--;if(i>=l)return!0;const r=y(1,g((l-i+1)/e));for(let e=t[i],s=i+r;l>=s;s+=r){const i=t[s];if(null!=i){if(e>=i)return!1;e=i}}return!0}(e[0])||(e=function(t){let e=t[0],s=e.length,i=Array(s);for(let t=0;i.length>t;t++)i[t]=t;i.sort((t,s)=>e[t]-e[s]);let l=[];for(let e=0;t.length>e;e++){let r=t[e],o=Array(s);for(let t=0;s>t;t++)o[t]=r[i[t]];l.push(o)}return l}(e)),e}let s=new Set;for(let e=0;t.length>e;e++){let i=t[e][0],l=i.length;for(let t=0;l>t;t++)s.add(i[t])}let i=[Array.from(s).sort((t,e)=>t-e)],l=i[0].length,r=new Map;for(let t=0;l>t;t++)r.set(i[0][t],t);for(let s=0;t.length>s;s++){let o=t[s],n=o[0];for(let t=1;o.length>t;t++){let h=o[t],a=Array(l).fill(void 0),u=e?e[s][t]:1,c=[];for(let t=0;h.length>t;t++){let e=h[t],s=r.get(n[t]);null===e?0!=u&&(a[s]=e,2==u&&c.push(s)):a[s]=e}Q(a,c,l),i.push(a)}}return i},$s.fmtDate=zt,$s.tzDate=function(t,e){let s;return"UTC"==e||"Etc/UTC"==e?s=new Date(+t+6e4*t.getTimezoneOffset()):e==Vt?s=t:(s=new Date(t.toLocaleString("en-US",{timeZone:e})),s.setMilliseconds(t.getMilliseconds())),s},$s.sync=Ot;{$s.addGap=function(t,e,s){let i=t[t.length-1];i&&i[0]==e?i[1]=s:t.push([e,s])},$s.clipGaps=Xt;let t=$s.paths={points:le};t.linear=he,t.stepped=function(t){const s=h(t.align,1),i=h(t.ascDesc,!1),l=h(t.alignGaps,0),r=h(t.extend,!1);return(t,o,n,h)=>{let{pxRatio:a}=t;return $t(t,o,(u,c,p,d,f,g,m,x,w,y,S)=>{[n,h]=e(p,n,h);let C=u.pxRound,{left:v,width:M}=t.bbox,L=t=>C(g(t,d,y,x)),b=t=>C(m(t,f,S,w)),T=0==d.ori?jt:Zt;const _={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:1},A=_.stroke,k=d.dir*(0==d.ori?1:-1);let P=b(p[1==k?n:h]),E=L(c[1==k?n:h]),W=E,R=E;r&&-1==s&&(R=v,T(A,R,P)),T(A,E,P);for(let t=1==k?n:h;t>=n&&h>=t;t+=k){let e=p[t];if(null==e)continue;let i=L(c[t]),l=b(e);1==s?T(A,i,P):T(A,W,l),T(A,i,l),P=l,W=i}let D=W;r&&1==s&&(D=v+M,T(A,D,P));let[I,H]=Yt(t,o);if(null!=u.fill||0!=I){let e=_.fill=new Path2D(A),s=b(u.fillTo(t,o,u.min,u.max,I));T(e,D,s),T(e,R,s)}if(!u.spanGaps){let e=[];e.push(...Gt(c,p,n,h,k,L,l));let r=u.width*a/2,f=i||1==s?r:-r,g=i||-1==s?-r:r;e.forEach(t=>{t[0]+=f,t[1]+=g}),_.gaps=e=u.gaps(t,o,n,h,e),_.clip=Xt(e,d.ori,x,w,y,S)}return 0!=H&&(_.band=2==H?[Nt(t,o,n,h,A,-1),Nt(t,o,n,h,A,1)]:Nt(t,o,n,h,A,H)),_})}},t.bars=function(t){const e=h((t=t||Y).size,[.6,b,1]),s=t.align||0,i=t.gap||0;let l=t.radius;l=null==l?[0,0]:"number"==typeof l?[l,0]:l;const r=k(l),o=1-e[0],n=h(e[1],b),a=h(e[2],1),u=h(t.disp,Y),c=h(t.each,()=>{}),{fill:p,stroke:d}=u;return(t,e,l,f)=>{let{pxRatio:m}=t;return $t(t,e,(x,S,C,v,M,L,b,T,A,k,E)=>{let W,R,D=x.pxRound,I=s,H=i*m,z=n*m,V=a*m;0==v.ori?[W,R]=r(t,e):[R,W]=r(t,e);const F=v.dir*(0==v.ori?1:-1);let O,$,Y,N=0==v.ori?qt:Qt,X=0==v.ori?c:(t,e,s,i,l,r,o)=>{c(t,e,s,l,i,o,r)},G=h(t.bands,K).find(t=>t.series[0]==e),B=x.fillTo(t,e,x.min,x.max,null!=G?G.dir:0),U=D(b(B,M,E,A)),J=k,j=D(x.width*m),Z=!1,q=null,Q=null,tt=null,et=null;null==p||0!=j&&null==d||(Z=!0,q=p.values(t,e,l,f),Q=new Map,new Set(q).forEach(t=>{null!=t&&Q.set(t,new Path2D)}),j>0&&(tt=d.values(t,e,l,f),et=new Map,new Set(tt).forEach(t=>{null!=t&&et.set(t,new Path2D)})));let{x0:st,size:it}=u;if(null!=st&&null!=it){I=1,S=st.values(t,e,l,f),2==st.unit&&(S=S.map(e=>t.posToVal(T+e*k,v.key,!0)));let s=it.values(t,e,l,f);$=2==it.unit?s[0]*k:L(s[0],v,k,T)-L(0,v,k,T),J=ae(S,C,L,v,k,T,J),Y=J-$+H}else J=ae(S,C,L,v,k,T,J),Y=J*o+H,$=J-Y;1>Y&&(Y=0),$/2>j||(j=0),5>Y&&(D=P);let lt=Y>0;$=D(_(J-Y-(lt?j:0),V,z)),O=(0==I?$/2:I==F?0:$)-I*F*((0==I?H/2:0)+(lt?j/2:0));const rt={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:0},ot=Z?null:new Path2D;let nt=null;if(null!=G)nt=t.data[G.series[1]];else{let{y0:s,y1:i}=u;null!=s&&null!=i&&(C=i.values(t,e,l,f),nt=s.values(t,e,l,f))}let ht=W*$,at=R*$;for(let s=1==F?l:f;s>=l&&f>=s;s+=F){let i=C[s];if(null==i)continue;if(null!=nt){let t=nt[s]??0;if(i-t==0)continue;U=b(t,M,E,A)}let l=L(2!=v.distr||null!=u?S[s]:s,v,k,T),r=b(h(i,B),M,E,A),o=D(l-O),n=D(y(r,U)),a=D(w(r,U)),c=n-a;if(null!=i){let l=0>i?at:ht,r=0>i?ht:at;Z?(j>0&&null!=tt[s]&&N(et.get(tt[s]),o,a+g(j/2),$,y(0,c-j),l,r),null!=q[s]&&N(Q.get(q[s]),o,a+g(j/2),$,y(0,c-j),l,r)):N(ot,o,a+g(j/2),$,y(0,c-j),l,r),X(t,e,s,o-j/2,a,$+j,c)}}return j>0?rt.stroke=Z?et:ot:Z||(rt._fill=0==x.width?x._fill:x._stroke??x._fill,rt.width=0),rt.fill=Z?Q:ot,rt})}},t.spline=function(t){return function(t,s){const i=h(s?.alignGaps,0);return(s,l,r,o)=>$t(s,l,(n,h,a,u,c,p,d,f,g,m,x)=>{[r,o]=e(a,r,o);let w,y,S,C=n.pxRound,v=t=>C(p(t,u,m,f)),M=t=>C(d(t,c,x,g));0==u.ori?(w=Ut,S=jt,y=se):(w=Jt,S=Zt,y=ie);const L=u.dir*(0==u.ori?1:-1);let b=v(h[1==L?r:o]),T=b,_=[],A=[];for(let t=1==L?r:o;t>=r&&o>=t;t+=L)if(null!=a[t]){let e=v(h[t]);_.push(T=e),A.push(M(a[t]))}const k={stroke:t(_,A,w,S,y,C),fill:null,clip:null,band:null,gaps:null,flags:1},P=k.stroke;let[E,W]=Yt(s,l);if(null!=n.fill||0!=E){let t=k.fill=new Path2D(P),e=M(n.fillTo(s,l,n.min,n.max,E));S(t,T,e),S(t,b,e)}if(!n.spanGaps){let t=[];t.push(...Gt(h,a,r,o,L,v,i)),k.gaps=t=n.gaps(s,l,r,o,t),k.clip=Xt(t,u.ori,f,g,m,x)}return 0!=W&&(k.band=2==W?[Nt(s,l,r,o,P,-1),Nt(s,l,r,o,P,1)]:Nt(s,l,r,o,P,W)),k})}(ue,t)}}return $s}();
